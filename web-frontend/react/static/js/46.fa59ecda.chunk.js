(this["webpackJsonpmjc-apps"]=this["webpackJsonpmjc-apps"]||[]).push([[46],{513:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"d",(function(){return s})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return c}));var n=a(531),r=a.n(n);function i(e){return"http://localhost/MJC/backend/public/"+e}function l(e){return"http://localhost/MJC/backend/storage/app/"+e}function s(e){return r.a.stringify(e)}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/x-www-form-urlencoded";return{headers:{"Content-Type":"".concat(t),Authorization:"Bearer ".concat(e)}}}function c(){return{Login:i("api/auth/login"),getOptionCabang:i("api/master/option-cabang"),getOptionLokasi:i("api/master/option-lokasi"),getOptionTiang:i("api/master/option-tiang"),getOptionMerk:i("api/master/option-merk"),getOptionPerusahaan:i("api/master/option-perusahaan"),getOptionPriv:i("api/master/option-privilege"),getOptionMenu:i("api/master/option-menu"),getOptionCctv:i("api/master/option-cctv"),getOptionKegiatan:i("api/master/option-kegiatan"),getMasterTiang:i("api/master/tiang"),postMasterTiang:i("api/master/tiang"),deleteMasterTiang:i("api/master/delete-tiang"),getMasterTiangBy:i("api/master/tiang-by"),updateMasterTiang:i("api/master/update-tiang"),postMasterPerusahaan:i("api/master/perusahaan"),getMasterPerusahaan:i("api/master/perusahaan"),deleteMasterPerusahaan:i("api/master/delete-perusahaan"),getMasterPerusahaanBy:i("api/master/perusahaan-by"),updateMasterPerusahaan:i("api/master/update-perusahaan"),getListAksesCctv:i("api/master/list-akses-cctv"),postListAksesCctv:i("api/master/list-akses-cctv"),getMasterLokasi:i("api/master/lokasi"),postMasterLokasi:i("api/master/lokasi"),deleteMasterLokasi:i("api/master/delete-lokasi"),getMasterLokasiBy:i("api/master/lokasi-by"),updateMasterLokasi:i("api/master/update-lokasi"),getMasterCabang:i("api/master/cabang"),postMasterCabang:i("api/master/cabang"),deleteMasterCabang:i("api/master/delete-cabang"),getMasterCabangBy:i("api/master/cabang-by"),updateMasterCabang:i("api/master/update-cabang"),getMasterMerk:i("api/master/merk"),postMasterMerk:i("api/master/merk"),deleteMasterMerk:i("api/master/delete-merk"),getMasterMerkBy:i("api/master/merk-by"),updateMasterMerk:i("api/master/update-merk"),getMasterCctv:i("api/master/cctv"),postMasterCctv:i("api/master/cctv"),deleteMasterCctv:i("api/master/delete-cctv"),getMasterCctvBy:i("api/master/cctv-by"),updateMasterCctv:i("api/master/update-cctv"),detailMasterCctv:i("api/master/detail-cctv"),getMasterUser:i("api/master/user"),postMasterUser:i("api/master/user"),statusMasterUser:i("api/master/status-user"),getMasterUserBy:i("api/master/user-by"),updateMasterUser:i("api/master/update-user"),detailMasterUser:i("api/master/detail-user"),getMasterPrivilege:i("api/master/privilege"),postMasterPrivilege:i("api/master/privilege"),deleteMasterPrivilege:i("api/master/delete-privilege"),getMasterPrivilegeBy:i("api/master/privilege-by"),updateMasterPrivilege:i("api/master/update-privilege"),getListPermission:i("api/master/list-permission"),postListPermission:i("api/master/list-permission"),getMasterMenu:i("api/master/menu"),postMasterMenu:i("api/master/menu"),deleteMasterMenu:i("api/master/delete-menu"),getMasterMenuBy:i("api/master/menu-by"),updateMasterMenu:i("api/master/update-menu"),getMasterSubmenu:i("api/master/sub-menu"),postMasterSubmenu:i("api/master/sub-menu"),deleteMasterSubmenu:i("api/master/delete-sub-menu"),getMasterSubmenuBy:i("api/master/sub-menu-by"),updateMasterSubmenu:i("api/master/update-sub-menu"),postMaintenance:i("api/maintenance/save"),getMaintenance:i("api/maintenance/list"),deleteMaintenance:i("api/maintenance/delete"),detailMaintenance:i("api/maintenance/detail"),getMaintenanceBy:i("api/maintenance/update-by"),updateMaintenance:i("api/maintenance/update")}}},517:function(e,t,a){"use strict";a.d(t,"c",(function(){return k})),a.d(t,"b",(function(){return y})),a.d(t,"d",(function(){return C})),a.d(t,"a",(function(){return M}));var n=a(512),r=a(2),i=a.n(r),l=a(838),s=a(863),o=a(571),c=a(839),u=a(508),m=a(509),d=a(538),p=a.n(d),g=a(527),f=a.n(g),h=a(507),b=a.n(h),v=(a(528),a(523));function E(e){var t="Mengalami masalah";if(e&&""===e.message)switch(e.type){case"required":t="Wajib di isi.";break;case"min":t="Kurang dari nilai minimal.";break;case"max":t="Lebih dari nilai maksimal.";break;case"minLength":t="Panjang karakter kurang.";break;case"maxLength":t="Panjang karakter lebih."}else if(e)switch(e.type){case"required":t=e.message;break;case"min":t="Nilai harus lebih dari: "+e.message;break;case"max":t="Nilai harus kurang dari: "+e.message;break;case"minLength":t="Panjang karakter harus lebih dari: "+e.message;break;case"maxLength":t="Panjang karakter harus kurang dari: "+e.message;break;default:t=e.message}return t}function k(e){var t=E(e.errors[e.name]);return i.a.createElement(l.a,null,i.a.createElement(s.a,null,e.label),i.a.createElement(o.a,{name:e.name,invalid:e.errors[e.name]&&!0,onChange:e.onChange,innerRef:e.refs,type:e.type,value:e.value,rows:e.rows,disabled:!!e.disabled&&e.disabled}),i.a.createElement(c.a,null,e.errors[e.name]&&t))}function y(e){var t=Object(r.useState)(e.value),a=Object(n.a)(t,2),u=a[0],m=a[1],d=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;m(a),e.onChange&&e.onChange(t,a)},p=E(e.errors[e.name]);return i.a.createElement(l.a,null,i.a.createElement(s.a,null,e.label),i.a.createElement(o.a,{type:"file",onChange:function(e){return function(e){if(e.target.files[0])if("image"!==e.target.files[0].type.split("/")[0])b.a.fire({title:"Error!",text:"Hanya File Gambar",icon:"error",confirmButtonText:"OK"}),d(e);else{var t=!1;e.target.files[0]&&(t=!0),t&&f.a.imageFileResizer(e.target.files[0],600,600,"PNG",100,0,(function(t){d(e,t)}),"base64")}else d(e)}(e)},accept:"image/*"}),u?i.a.createElement("img",{style:{width:"120px"},src:u}):null,i.a.createElement(o.a,{innerRef:e.refs,type:"hidden",name:e.name,invalid:e.errors[e.name]&&!0,value:u||""}),i.a.createElement(c.a,null,e.errors[e.name]&&p))}function M(e){var t=E(e.errors[e.name]),a=null,d=null,g=Object(r.useState)(e.value),f=Object(n.a)(g,2),h=f[0],b=f[1];e.value&&(a=v(e.value).format("YYYY-MM-DD"),d=v(e.value).format("HH:mm"));var k=Object(r.useState)(a),y=Object(n.a)(k,2),M=y[0],C=y[1],O=Object(r.useState)(d),S=Object(n.a)(O,2),x=S[0],_=S[1];return i.a.createElement(l.a,null,i.a.createElement(s.a,null,e.label),i.a.createElement(u.a,null,i.a.createElement(m.a,{md:"8"},i.a.createElement(p.a,{onChange:function(t){return function(t){var a=null;if("string"===typeof t)b(null),console.log("is string");else{var n=t._d;n.getDate(),n.getMonth(),n.getFullYear();a=v(n).format("YYYY-MM-DD"),C(a),null!==x&&b(a+" "+x)}e.onChange&&e.onChange(t)}(t)},dateFormat:"dddd, DD MMMM YYYY",timeFormat:!1,locale:"id",value:M&&v(M).format("dddd, DD MMMM YYYY")})),i.a.createElement(m.a,{md:"4"},i.a.createElement(p.a,{onChange:function(t){return function(t){var a=null;if("string"===typeof t)b(null),console.log("is string");else{var n=t._d;n.getHours(),n.getMinutes(),n.getSeconds();a=v(n).format("HH:mm"),_(a),null!==M&&b(M+" "+a)}e.onChange&&e.onChange(t)}(t)},dateFormat:!1,timeFormat:"HH:mm",locale:"id",value:x}))),i.a.createElement(o.a,{innerRef:e.refs,type:"hidden",name:e.name,invalid:e.errors[e.name]&&!0,value:h||""}),i.a.createElement(c.a,null,e.errors[e.name]&&t))}function C(e){var t=E(e.errors[e.name]);return i.a.createElement(l.a,null,i.a.createElement(s.a,null,e.label),i.a.createElement(o.a,{name:e.name,invalid:e.errors[e.name]&&!0,onChange:e.onChange,innerRef:e.refs,type:"select",value:e.value},e.data.map((function(e,t){return i.a.createElement("option",{key:t,value:e.value},e.name)}))),i.a.createElement(c.a,null,e.errors[e.name]&&t))}},518:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return s}));var n=a(507),r=a.n(n);function i(e){if(1===e.api_status)return!0;0===e.api_status?r.a.fire({title:"Error!",text:e.api_message,icon:"error",confirmButtonText:"OK"}):401===e.api_status&&(localStorage.removeItem("token"),localStorage.removeItem("ListMenu"),r.a.fire({title:"Auth Failed!",text:e.api_message,icon:"error",confirmButtonText:"OK",allowOutsideClick:!1,allowEscapeKey:!1}).then((function(e){window.location.reload(!0)})))}function l(){r.a.fire({title:"Wait",timerProgressBar:!0,allowOutsideClick:!1,allowEscapeKey:!1,onBeforeOpen:function(){r.a.showLoading()}})}function s(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=a.length,r=0;r<e;r++)t+=a.charAt(Math.floor(Math.random()*n));return t}},519:function(e,t,a){"use strict";var n=a(152),r=a(153),i=a(156),l=a(154),s=a(155),o=a(2),c=a.n(o),u=a(508),m=a(509),d=a(838),p=a(571),g=a(569),f=a(570),h=a(521),b=a(572),v=a(533),E="LEFT",k="RIGHT",y=function(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=e,r=[];n<=t;)r.push(n),n+=a;return r},M=function(e){function t(e){var a;Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).gotoPage=function(e){var t=a.props.onPageChanged,n=void 0===t?function(e){return e}:t,r=Math.max(0,Math.min(e,Math.ceil(a.props.totalRecords/a.props.pageLimit))),i={currentPage:r,totalPages:Math.ceil(a.props.totalRecords/a.props.pageLimit),pageLimit:a.props.pageLimit,totalRecords:a.props.totalRecords};a.setState({currentPage:r},(function(){return n(i)}))},a.handleClick=function(e){return function(t){t.preventDefault(),a.gotoPage(e)}},a.handleMoveLeft=function(e){e.preventDefault(),a.gotoPage(a.state.currentPage-2*a.pageNeighbours-1)},a.handleMoveRight=function(e){e.preventDefault(),a.gotoPage(a.state.currentPage+2*a.pageNeighbours+1)},a.fetchPageNumbers=function(){var e=Math.ceil(a.props.totalRecords/a.props.pageLimit),t=a.state.currentPage,n=a.pageNeighbours,r=2*a.pageNeighbours+3;if(e>r+2){var i=Math.max(2,t-n),l=Math.min(e-1,t+n),s=y(i,l),o=i>2,c=e-l>1,u=r-(s.length+1);switch(!0){case o&&!c:var m=y(i-u,i-1);s=[E].concat(Object(v.a)(m),Object(v.a)(s));break;case!o&&c:var d=y(l+1,l+u);s=[].concat(Object(v.a)(s),Object(v.a)(d),[k]);break;case o&&c:default:s=[E].concat(Object(v.a)(s),[k])}return[1].concat(Object(v.a)(s),[e])}return y(1,e)};var r=e.totalRecords,s=void 0===r?null:r,o=e.pageLimit,c=void 0===o?30:o,u=e.pageNeighbours,m=void 0===u?0:u;return a.pageLimit="number"===typeof c?c:30,a.totalRecords="number"===typeof s?s:0,a.pageNeighbours="number"===typeof m?Math.max(0,Math.min(m,2)):0,a.totalPages=Math.ceil(a.totalRecords/a.pageLimit),a.state={currentPage:1},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.pageLimit!==this.props.pageLimit&&this.gotoPage(1)}},{key:"componentDidMount",value:function(){this.gotoPage(1)}},{key:"render",value:function(){var e=this;if(!this.props.totalRecords||1===Math.ceil(this.props.totalRecords/this.props.pageLimit))return null;var t=this.state.currentPage,a=this.fetchPageNumbers();return c.a.createElement(o.Fragment,null,c.a.createElement("nav",{"aria-label":"Countries Pagination"},c.a.createElement("ul",{className:"pagination pull-right"},a.map((function(a,n){return a===E?c.a.createElement("li",{key:n,className:"page-item"},c.a.createElement("a",{className:"page-link",href:"#","aria-label":"Previous",onClick:e.handleMoveLeft},c.a.createElement("span",{"aria-hidden":"true"},"\xab"),c.a.createElement("span",{className:"sr-only"},"Previous"))):a===k?c.a.createElement("li",{key:n,className:"page-item"},c.a.createElement("a",{className:"page-link",href:"#","aria-label":"Next",onClick:e.handleMoveRight},c.a.createElement("span",{"aria-hidden":"true"},"\xbb"),c.a.createElement("span",{className:"sr-only"},"Next"))):c.a.createElement("li",{key:n,className:"page-item".concat(t===a?" active":"")},c.a.createElement("a",{className:"page-link",href:"#",onClick:e.handleClick(a)},a))})))))}}]),t}(o.Component);a.d(t,"a",(function(){return C}));var C=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).onPageChanged=function(e){var t=e.currentPage;a.setState({page:t},(function(){a.FilterResult()}))},a.handleSearch=function(e){a.setState({search:e.target.value,page:1},(function(){a.FilterResult()}))},a.handleRow=function(e){a.setState({row:e.target.value,page:1},(function(){a.FilterResult()}))},a.state={sort:null,sortStatus:0,page:1,search:"",row:5},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"Sorting",value:function(e){var t,a=this;e===this.state.sort?(0===this.state.sortStatus?t=1:1===this.state.sortStatus?t=2:(t=0,e=null),this.setState({sort:e,sortStatus:t},(function(){a.FilterResult()}))):this.setState({sort:e,sortStatus:1},(function(){a.FilterResult()}))}},{key:"encodeQueryData",value:function(e){var t=[];for(var a in e)e[a]&&t.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return t.join("&")}},{key:"FilterResult",value:function(){var e={page:this.state.page,row:this.state.row,search:this.state.search,by:this.state.sort,sort:this.state.sortStatus};this.props.handleRespone({query:this.encodeQueryData(e)})}},{key:"HeaderField",value:function(e){for(var t=this,a=["fa fa-sort fa-sm mt-2","fa fa-sort-asc fa-sm mt-2","fa fa-sort-desc fa-sm mt-2"],n=["#bfbfbf","black","black"],r=[],i=function(i){s=e[i].width?e[i].width:null,null!==e[i].field&&!1!==e[i].sort?r.push(c.a.createElement("th",{width:s,style:{cursor:"pointer"},onClick:function(){return t.Sorting(e[i].field)},key:i},e[i].title,"  ",c.a.createElement("i",{style:{color:t.state.sort===e[i].field?n[t.state.sortStatus]:n[0]},className:t.state.sort===e[i].field?a[t.state.sortStatus]:a[0]}))):r.push(c.a.createElement("th",{width:s,key:i},e[i].title))},l=0;l<e.length;l++){var s;i(l)}return c.a.createElement("thead",null,c.a.createElement("tr",null,r))}},{key:"ListValue",value:function(e,t){var a;if(null!=e){var n=e.from;a=e.data.map((function(e,a){for(var r=[],i=0;i<t.length;i++)t[i].template?r.push(c.a.createElement("td",{key:i},t[i].template(e,a,n++))):r.push(c.a.createElement("td",{key:i},e[t[i].field]));return c.a.createElement("tr",{key:a},r)}))}return a}},{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(u.a,null,c.a.createElement(m.a,{xs:"12",sm:"6",md:"6"},c.a.createElement(d.a,{row:!0},c.a.createElement(m.a,{xs:"12",sm:"6",md:"4"},c.a.createElement(p.a,{onChange:this.handleRow,type:"select",name:"rows",id:"rows"},c.a.createElement("option",{value:"5"},"5 Rows"),c.a.createElement("option",{value:"10"},"10 Rows"),c.a.createElement("option",{value:"15"},"15 Rows"),c.a.createElement("option",{value:"20"},"20 Rows"),c.a.createElement("option",{value:"25"},"25 Rows"),c.a.createElement("option",{value:"30"},"30 Rows"))))),c.a.createElement(m.a,{xs:"12",sm:"6",md:"6"},c.a.createElement(d.a,{row:!0},c.a.createElement(m.a,{md:"12"},c.a.createElement(g.a,{className:"pull-bottom"},c.a.createElement(f.a,{addonType:"prepend"},c.a.createElement(h.a,{type:"button",color:"primary"},c.a.createElement("i",{className:"fa fa-search"})," Search")),c.a.createElement(p.a,{onChange:this.handleSearch,type:"text",id:"input1-group2",name:"input1-group2",placeholder:"Type Here....."})))))),c.a.createElement(b.a,{hover:!0,bordered:!0,striped:!0,responsive:!0},this.HeaderField(this.props.columns),c.a.createElement("tbody",null,this.props.loading?c.a.createElement("tr",null,c.a.createElement("td",{colSpan:this.props.columns.length,align:"center"},"Loading...")):this.ListValue(this.props.data,this.props.columns))),null!=this.props.data?c.a.createElement(u.a,null,c.a.createElement(m.a,{xs:"12",sm:"6",md:"6"},c.a.createElement("dt",null,"Showing ",this.props.data.from," to ",this.props.data.to," of ",this.props.data.total," entries")),c.a.createElement(m.a,{xs:"12",sm:"6",md:"6"},c.a.createElement(M,{totalRecords:this.props.data.total,pageLimit:parseInt(this.props.data.per_page),pageNeighbours:1,onPageChanged:this.onPageChanged}))):null)}}]),t}(o.Component)},940:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return q}));var n=a(152),r=a(153),i=a(156),l=a(154),s=a(155),o=a(512),c=a(2),u=a.n(c),m=a(508),d=a(509),p=a(514),g=a(516),f=a(521),h=a(515),b=a(664),v=a(838),E=a(863),k=a(571),y=a(572),M=a(530),C=a.n(M),O=a(507),S=a.n(O),x=a(519),_=a(517),j=a(518),L=a(540),T=a(513),D=a(539),w=a(158);function P(e){var t=Object(L.a)(),a=t.register,n=t.handleSubmit,r=t.errors,i=t.reset,l=[{value:"",name:"Loading..."}],s=Object(c.useState)(!1),y=Object(o.a)(s,2),M=y[0],O=y[1],x=Object(c.useState)(!1),w=Object(o.a)(x,2),P=w[0],N=w[1],q=Object(c.useState)(l),B=Object(o.a)(q,2),R=B[0],K=B[1],A=e.optionCabang.filter((function(e,t,a){return""!==e.value})),I=e.optionTiang.filter((function(e,t,a){return""!==e.value})),U=e.optionMerk.filter((function(e,t,a){return""!==e.value}));function F(e){N(!0),K(l),C.a.get(Object(T.a)().getOptionLokasi+"?id_cabang="+e,Object(T.c)(localStorage.getItem("token"))).then((function(e){var t=e.data;Object(j.b)(t)&&K(t.data)})).catch((function(e){S.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"})}))}return Object(c.useEffect)((function(){P||F(A[0].value)}),[R]),u.a.createElement(m.a,null,u.a.createElement(d.a,{xs:"12",sm:"12",md:"12"},u.a.createElement(p.a,null,u.a.createElement(g.a,null,u.a.createElement("strong",null,"Tambah Data"),u.a.createElement("div",{className:"card-header-actions"},u.a.createElement(f.a,{onClick:function(){return e.onClick()},block:!0,outline:!0,color:"primary"},u.a.createElement("i",{className:"fa fa-remove"})," ",u.a.createElement("span",null,"Hide")))),u.a.createElement(h.a,null,u.a.createElement(b.a,{onSubmit:n((function(t){S.a.fire({title:"Apakah anda yakin ? ",icon:"info",text:"Menambah data ini ?",showCancelButton:!0,focusConfirm:!1,confirmButtonText:"Ya",cancelButtonText:"Cancel"}).then((function(a){a.value&&(O(!0),C.a.post(Object(T.a)().postMasterCctv,Object(T.d)(t),Object(T.c)(localStorage.getItem("token"))).then((function(t){var a=t.data;Object(j.b)(a)&&(S.a.fire({title:"Sukses!",text:a.api_message,icon:"success",confirmButtonText:"OK"}),O(!1),i(),e.refreshData(!0))})).catch((function(e){S.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"}),O(!1)})))}))}))},u.a.createElement(m.a,null,u.a.createElement(d.a,{sm:"6"},u.a.createElement(_.d,{refs:a({required:!0}),name:"id_cabang",label:"Cabang",errors:r,data:A,onChange:function(e){return F(e.target.value)}}),u.a.createElement(_.d,{refs:a({required:!0}),name:"id_lokasi",label:"Lokasi",errors:r,data:R}),u.a.createElement(_.c,{refs:a({required:!0,maxLength:{value:15,message:"15"}}),name:"kode_cctv",label:"Kode CCTV",type:"text",errors:r}),u.a.createElement(_.c,{refs:a({required:!0,maxLength:{value:200,message:"200"}}),name:"nama_cctv",label:"Nama CCTV",type:"text",errors:r}),u.a.createElement(_.c,{refs:a({required:!0,maxLength:{value:15,message:"15"},minLength:{value:7,message:"7"},pattern:{value:/((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,message:"Format IP Address tidak sesuai."}}),name:"ip_address",label:"IP Address",type:"text",errors:r}),u.a.createElement(_.c,{refs:a({required:!0,maxLength:{value:50,message:"50"}}),name:"type",label:"Tipe CCTV",type:"text",errors:r})),u.a.createElement(d.a,{sm:"6"},u.a.createElement(_.d,{refs:a({required:!0}),name:"status",label:"Status",errors:r,data:[{value:1,name:"Aktif"},{value:0,name:"Tidak Aktif"}]}),u.a.createElement(_.d,{refs:a({required:!0}),name:"id_tipe_tiang",label:"Tipe Tiang",errors:r,data:I}),u.a.createElement(_.d,{refs:a({required:!0}),name:"id_merk",label:"Merk",errors:r,data:U}),u.a.createElement(_.c,{refs:a({required:!0,maxLength:{value:100,message:"100"}}),name:"username",label:"Username",type:"text",errors:r}),u.a.createElement(_.c,{refs:a({required:!0,maxLength:{value:100,message:"100"}}),name:"password",label:"Password",type:"text",errors:r}),u.a.createElement(_.c,{refs:a({required:!0,maxLength:{value:250,message:"250"}}),name:"keterangan",label:"Keterangan",type:"textarea",errors:r})),u.a.createElement(d.a,{sm:"12"},u.a.createElement(v.a,{row:!0},u.a.createElement(d.a,{md:"12"},u.a.createElement(E.a,null,"Akses CCTV"),e.optionPerusahaan.map((function(e,t){return u.a.createElement(v.a,{key:t,check:!0,className:"checkbox"},u.a.createElement(k.a,{className:"form-check-input",innerRef:a(),type:"checkbox",name:"perusahaan",value:e.value}),u.a.createElement(E.a,{check:!0,className:"form-check-label"},e.name))})))))),u.a.createElement(f.a,{type:"submit",size:"sm",color:"primary",disabled:M}," ",M?u.a.createElement(D.MetroSpinner,{size:16,color:"#fff"}):u.a.createElement("span",null,u.a.createElement("i",{className:"fa fa-dot-circle-o"})," Submit")))))))}function N(e){var t=Object(L.a)({defaultValues:{id_cabang:e.data.id_cabang,kode_cctv:e.data.kode_cctv,nama_cctv:e.data.nama_cctv,ip_address:e.data.ip,type:e.data.type,status:e.data.status,id_tipe_tiang:e.data.id_tipe_tiang,id_merk:e.data.id_merk,username:e.data.username,password:e.data.password,keterangan:e.data.keterangan}}),a=t.register,n=t.handleSubmit,r=t.errors,i=t.setValue,l=t.reset,s=[{value:"",name:"Loading..."}],v=Object(c.useState)(!1),E=Object(o.a)(v,2),k=E[0],y=E[1],M=Object(c.useState)(!1),O=Object(o.a)(M,2),x=O[0],w=O[1],P=Object(c.useState)(s),N=Object(o.a)(P,2),q=N[0],B=N[1],R=e.optionCabang.filter((function(e,t,a){return""!==e.value})),K=e.optionTiang.filter((function(e,t,a){return""!==e.value})),A=e.optionMerk.filter((function(e,t,a){return""!==e.value}));function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;w(!0),B(s),C.a.get(Object(T.a)().getOptionLokasi+"?id_cabang="+e,Object(T.c)(localStorage.getItem("token"))).then((function(e){var a=e.data;Object(j.b)(a)&&(B(a.data),t&&i("id_lokasi",t))})).catch((function(e){S.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"})}))}return Object(c.useEffect)((function(){x||I(e.data.id_cabang,e.data.id_lokasi)}),[q]),u.a.createElement(m.a,null,u.a.createElement(d.a,{xs:"12",sm:"12",md:"12"},u.a.createElement(p.a,null,u.a.createElement(g.a,null,u.a.createElement("strong",null,"Ubah Data"),u.a.createElement("div",{className:"card-header-actions"},u.a.createElement(f.a,{onClick:function(){return e.onClick()},block:!0,outline:!0,color:"primary"},u.a.createElement("i",{className:"fa fa-remove"})," ",u.a.createElement("span",null,"Hide")))),u.a.createElement(h.a,null,u.a.createElement(b.a,{onSubmit:n((function(t){S.a.fire({title:"Apakah anda yakin ? ",icon:"info",text:"Merubah data ini ?",showCancelButton:!0,focusConfirm:!1,confirmButtonText:"Ya",cancelButtonText:"Cancel"}).then((function(a){a.value&&(y(!0),C.a.post(Object(T.a)().updateMasterCctv,Object(T.d)(t),Object(T.c)(localStorage.getItem("token"))).then((function(t){var a=t.data;Object(j.b)(a)&&(S.a.fire({title:"Sukses!",text:a.api_message,icon:"success",confirmButtonText:"OK"}),y(!1),l(),e.onClick(),e.refreshData(!0))})).catch((function(e){S.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"}),y(!1)})))}))}))},u.a.createElement("input",{ref:a(),type:"hidden",name:"id",value:e.data.id_cctv}),u.a.createElement(m.a,null,u.a.createElement(d.a,{sm:"6"},u.a.createElement(_.d,{refs:a({required:!0}),name:"id_cabang",label:"Cabang",errors:r,data:R,onChange:function(e){return I(e.target.value)}}),u.a.createElement(_.d,{refs:a({required:!0}),name:"id_lokasi",label:"Lokasi",errors:r,data:q}),u.a.createElement(_.c,{refs:a({required:!0,maxLength:{value:15,message:"15"}}),name:"kode_cctv",label:"Kode CCTV",type:"text",errors:r}),u.a.createElement(_.c,{refs:a({required:!0,maxLength:{value:200,message:"200"}}),name:"nama_cctv",label:"Nama CCTV",type:"text",errors:r}),u.a.createElement(_.c,{refs:a({required:!0,maxLength:{value:15,message:"15"},minLength:{value:7,message:"7"},pattern:{value:/((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,message:"Format IP Address tidak sesuai."}}),name:"ip_address",label:"IP Address",type:"text",errors:r}),u.a.createElement(_.c,{refs:a({required:!0,maxLength:{value:50,message:"50"}}),name:"type",label:"Tipe CCTV",type:"text",errors:r})),u.a.createElement(d.a,{sm:"6"},u.a.createElement(_.d,{refs:a({required:!0}),name:"status",label:"Status",errors:r,data:[{value:1,name:"Aktif"},{value:0,name:"Tidak Aktif"}]}),u.a.createElement(_.d,{refs:a({required:!0}),name:"id_tipe_tiang",label:"Tipe Tiang",errors:r,data:K}),u.a.createElement(_.d,{refs:a({required:!0}),name:"id_merk",label:"Merk",errors:r,data:A}),u.a.createElement(_.c,{refs:a({required:!0,maxLength:{value:100,message:"100"}}),name:"username",label:"Username",type:"text",errors:r}),u.a.createElement(_.c,{refs:a({required:!0,maxLength:{value:100,message:"100"}}),name:"password",label:"Password",type:"text",errors:r}),u.a.createElement(_.c,{refs:a({required:!0,maxLength:{value:250,message:"250"}}),name:"keterangan",label:"Keterangan",type:"textarea",errors:r}))),u.a.createElement(f.a,{type:"submit",size:"sm",color:"primary",disabled:k}," ",k?u.a.createElement(D.MetroSpinner,{size:16,color:"#fff"}):u.a.createElement("span",null,u.a.createElement("i",{className:"fa fa-dot-circle-o"})," Ubah")))))))}var q=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).columns=[{title:"",field:null,width:120,template:function(e){return u.a.createElement(u.a.Fragment,null,u.a.createElement(f.a,{onClick:function(){return a.doDelete(e.id_cctv)},title:"Hapus",className:"btn-danger btn-brand icon btn-sm"},u.a.createElement("i",{className:"cui-trash"}))," ","   ",u.a.createElement(f.a,{onClick:function(){return a.doUpdate(e.id_cctv)},title:"Ubah",className:"btn-stack-overflow btn-brand icon btn-sm"},u.a.createElement("i",{className:"cui-pencil"}))," ","   ",u.a.createElement(f.a,{onClick:function(){return a.doRead(e.id_cctv)},title:"Detail",className:"btn-info btn-brand icon btn-sm"},u.a.createElement("i",{style:{color:"#fff"},className:"cui-magnifying-glass"})))}},{title:"Kode CCTV",field:"kode_cctv"},{title:"Nama CCTV",field:"nama_cctv"},{title:"IP Address",field:"ip"},{title:"Lokasi",field:"nama_lokasi"},{title:"Tipe Tiang",field:"nama_tipe"}],a.handleRespone=function(e){var t=e.query;a.setState({query:t},(function(){a.getData()}))},a.state={data:null,loading:!0,query:"page=1&row=5",query_cabang:"",query_lokasi:"",query_tiang:"",query_merk:"",detailData:null,pageDetail:!1,pageLoading:!1,pageAdd:!1,pageUpdate:!1,dataUpdate:null,optionCabang:null,id_cabang:null,optionLokasi:null,id_lokasi:null,optionTiang:null,id_tipe_tiang:null,optionMerk:null,code_merk:null,hide:!1,optionPerusahaan:null},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.getCabang(),this.getTiang(),this.getMerk(),this.getPerusahaan()}},{key:"getData",value:function(){var e=this;this.setState({loading:!0}),C.a.get(Object(T.a)().getMasterCctv+"?"+this.state.query+this.state.query_cabang+this.state.query_lokasi+this.state.query_tiang+this.state.query_merk,Object(T.c)(localStorage.getItem("token"))).then((function(t){var a=t.data;Object(j.b)(a)&&e.setState({data:a.data,loading:!1})})).catch((function(e){S.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"})}))}},{key:"getPerusahaan",value:function(){var e=this;C.a.get(Object(T.a)().getOptionPerusahaan,Object(T.c)(localStorage.getItem("token"))).then((function(t){var a=t.data;Object(j.b)(a)&&e.setState({optionPerusahaan:a.data})})).catch((function(e){S.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"})}))}},{key:"getCabang",value:function(){var e=this;C.a.get(Object(T.a)().getOptionCabang+"?all=true",Object(T.c)(localStorage.getItem("token"))).then((function(t){var a=t.data;Object(j.b)(a)&&e.setState({optionCabang:a.data,query_cabang:"&id_cabang="+a.data[0].value,id_cabang:a.data[0].value},(function(){e.getLokasi()}))})).catch((function(e){S.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"})}))}},{key:"getLokasi",value:function(){var e=this;C.a.get(Object(T.a)().getOptionLokasi+"?all=true"+this.state.query_cabang,Object(T.c)(localStorage.getItem("token"))).then((function(t){var a=t.data;Object(j.b)(a)&&e.setState({optionLokasi:a.data,query_lokasi:"&id_lokasi="+a.data[0].value,id_lokasi:a.data[0].value},(function(){e.getData()}))})).catch((function(e){S.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"})}))}},{key:"getTiang",value:function(){var e=this;C.a.get(Object(T.a)().getOptionTiang+"?all=true",Object(T.c)(localStorage.getItem("token"))).then((function(t){var a=t.data;Object(j.b)(a)&&e.setState({optionTiang:a.data,query_tiang:"&id_tipe_tiang="+a.data[0].value,id_tipe_tiang:a.data[0].value},(function(){e.getData()}))})).catch((function(e){S.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"})}))}},{key:"getMerk",value:function(){var e=this;C.a.get(Object(T.a)().getOptionMerk+"?all=true",Object(T.c)(localStorage.getItem("token"))).then((function(t){var a=t.data;Object(j.b)(a)&&e.setState({optionMerk:a.data,query_merk:"&code_merk="+a.data[0].value,code_merk:a.data[0].value},(function(){e.getData()}))})).catch((function(e){S.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"})}))}},{key:"doDelete",value:function(e){var t=this;S.a.fire({title:"Apakah anda yakin ? ",icon:"info",text:"Menghapus data ini ?",showCancelButton:!0,focusConfirm:!1,confirmButtonText:"Ya",cancelButtonText:"Cancel"}).then((function(a){a.value&&(Object(j.a)(),C.a.post(Object(T.a)().deleteMasterCctv,Object(T.d)({id:e}),Object(T.c)(localStorage.getItem("token"))).then((function(e){var a=e.data;Object(j.b)(a)&&(S.a.fire({title:"Sukses!",text:a.api_message,icon:"success",confirmButtonText:"OK"}),t.getData())})).catch((function(e){S.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"})})))}))}},{key:"doUpdate",value:function(e){var t=this;window.scrollTo(0,0),this.setState({dataUpdate:null,pageUpdate:!1,pageLoading:!0,pageAdd:!1}),C.a.get(Object(T.a)().getMasterCctvBy+"?id="+e,Object(T.c)(localStorage.getItem("token"))).then((function(e){var a=e.data;Object(j.b)(a)&&t.setState({dataUpdate:a.data,pageUpdate:!0,pageLoading:!1})})).catch((function(e){S.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"})}))}},{key:"doRead",value:function(e){var t=this;this.setState({pageLoading:!0}),C.a.get(Object(T.a)().detailMasterCctv+"?id="+e,Object(T.c)(localStorage.getItem("token"))).then((function(e){var a=e.data;Object(j.b)(a)&&t.setState({pageDetail:!0,detailData:a.data,pageLoading:!1})})).catch((function(e){S.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"})}))}},{key:"handleLokasi",value:function(e){var t=this;this.setState({id_lokasi:e.target.value,query_lokasi:"&id_lokasi="+e.target.value},(function(){t.getData()}))}},{key:"handleCabang",value:function(e){var t=this;this.setState({id_cabang:e.target.value,query_cabang:"&id_cabang="+e.target.value},(function(){t.getLokasi()}))}},{key:"handleTiang",value:function(e){var t=this;this.setState({id_tipe_tiang:e.target.value,query_tiang:"&id_tipe_tiang="+e.target.value},(function(){t.getData()}))}},{key:"handleMerk",value:function(e){var t=this;this.setState({code_merk:e.target.value,query_merk:"&code_merk="+e.target.value},(function(){t.getData()}))}},{key:"valueDetail",value:function(e,t){return u.a.createElement("tr",null,u.a.createElement("td",{width:250},e),u.a.createElement("td",{width:5},":"),u.a.createElement("td",null,t))}},{key:"render",value:function(){var e=this;return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{style:{display:this.state.pageDetail?"inline":"none"}},u.a.createElement("div",{className:"animated fadeIn"},u.a.createElement(m.a,null,u.a.createElement(d.a,{xs:"12",sm:"12",md:"12"},u.a.createElement(p.a,null,u.a.createElement(g.a,null,u.a.createElement("strong",null,"Detail"),u.a.createElement("div",{className:"card-header-actions"},u.a.createElement(f.a,{onClick:function(){return e.setState({pageDetail:!1})},color:"warning"},u.a.createElement("i",{className:"cui-chevron-left"})," ",u.a.createElement("span",null,"Back")))),u.a.createElement(h.a,null,this.state.detailData?u.a.createElement(y.a,{hover:!0,bordered:!0,striped:!0,responsive:!0},u.a.createElement("tbody",null,this.valueDetail("Kode CCTV",this.state.detailData.kode_cctv),this.valueDetail("Nama CCTV",this.state.detailData.nama_cctv),this.valueDetail("IP Address",this.state.detailData.ip),this.valueDetail("Tipe CCTV",this.state.detailData.type),this.valueDetail("Status","1"===this.state.detailData.status?"Aktif":"Tidak Aktif"),this.valueDetail("Lokasi CCTV",this.state.detailData.nama_lokasi),this.valueDetail("Tipe Tiang",this.state.detailData.nama_tipe),this.valueDetail("Merk",this.state.detailData.nama_merk),this.valueDetail("Username",this.state.detailData.username),this.valueDetail("Password",this.state.detailData.password),this.valueDetail("Keterangan",this.state.detailData.keterangan))):null)))))),u.a.createElement("div",{style:{display:this.state.pageDetail?"none":"inline"}},u.a.createElement(m.a,{style:{display:"flex",justifyContent:"center",marginBottom:"10px"}},this.state.pageLoading?u.a.createElement(D.MetroSpinner,{size:34,color:"#fff"}):null),this.state.pageAdd?u.a.createElement(P,{onClick:function(){return e.setState({pageAdd:!1})},refreshData:function(t){return e.getData()},optionCabang:this.state.optionCabang,optionTiang:this.state.optionTiang,optionMerk:this.state.optionMerk,optionPerusahaan:this.state.optionPerusahaan}):null,this.state.pageUpdate?u.a.createElement(N,{onClick:function(){return e.setState({pageUpdate:!1})},refreshData:function(t){return e.getData()},optionCabang:this.state.optionCabang,optionTiang:this.state.optionTiang,optionMerk:this.state.optionMerk,data:this.state.dataUpdate}):null,u.a.createElement("div",{className:"animated fadeIn"},u.a.createElement(m.a,null,u.a.createElement(d.a,{xs:"12",sm:"12",md:"12"},u.a.createElement(p.a,null,u.a.createElement(g.a,null,u.a.createElement("strong",null,"CCTV"),u.a.createElement("div",{className:"card-header-actions"},this.state.pageAdd?null:u.a.createElement(f.a,{onClick:function(){return e.setState({pageAdd:!0,pageUpdate:!1})},block:!0,outline:!0,color:"primary"},u.a.createElement("i",{className:"fa fa-plus-circle"})," ",u.a.createElement("span",null,"Tambah")))),u.a.createElement(h.a,null,this.state.hide?null:u.a.createElement(u.a.Fragment,null,u.a.createElement(v.a,{row:!0},u.a.createElement(d.a,{md:"1"},u.a.createElement(E.a,null,"Cabang")),u.a.createElement(d.a,{md:"5"},u.a.createElement(k.a,{name:"cabang",type:"select",onChange:function(t){return e.handleCabang(t)}},this.state.optionCabang?this.state.optionCabang.map((function(e,t){return u.a.createElement("option",{key:t,value:e.value},e.name)})):u.a.createElement("option",null,"Loading..."))),u.a.createElement(d.a,{md:"5"},u.a.createElement(w.Link,{to:"/master/cabang"},u.a.createElement(f.a,{title:"Lihat Cabang",className:"btn-info btn-brand icon"},u.a.createElement("span",{style:{color:"white"}},u.a.createElement("i",{className:"cui-list"})))))),u.a.createElement(v.a,{row:!0},u.a.createElement(d.a,{md:"1"},u.a.createElement(E.a,null,"Lokasi")),u.a.createElement(d.a,{md:"5"},u.a.createElement(k.a,{name:"lokasi",type:"select",onChange:function(t){return e.handleLokasi(t)}},this.state.optionLokasi?this.state.optionLokasi.map((function(e,t){return u.a.createElement("option",{key:t,value:e.value},e.name)})):u.a.createElement("option",null,"Loading..."))),u.a.createElement(d.a,{md:"5"},u.a.createElement(w.Link,{to:"/master/lokasi"},u.a.createElement(f.a,{title:"Lihat Lokasi",className:"btn-info btn-brand icon"},u.a.createElement("span",{style:{color:"white"}},u.a.createElement("i",{className:"cui-list"})))))),u.a.createElement(v.a,{row:!0},u.a.createElement(d.a,{md:"1"},u.a.createElement(E.a,null,"Tiang")),u.a.createElement(d.a,{md:"5"},u.a.createElement(k.a,{name:"tiang",type:"select",onChange:function(t){return e.handleTiang(t)}},this.state.optionTiang?this.state.optionTiang.map((function(e,t){return u.a.createElement("option",{key:t,value:e.value},e.name)})):u.a.createElement("option",null,"Loading..."))),u.a.createElement(d.a,{md:"5"},u.a.createElement(w.Link,{to:"/master/tiang"},u.a.createElement(f.a,{title:"Lihat Tiang",className:"btn-info btn-brand icon"},u.a.createElement("span",{style:{color:"white"}},u.a.createElement("i",{className:"cui-list"})))))),u.a.createElement(v.a,{row:!0},u.a.createElement(d.a,{md:"1"},u.a.createElement(E.a,null,"Merk")),u.a.createElement(d.a,{md:"5"},u.a.createElement(k.a,{name:"merk",type:"select",onChange:function(t){return e.handleMerk(t)}},this.state.optionMerk?this.state.optionMerk.map((function(e,t){return u.a.createElement("option",{key:t,value:e.value},e.name)})):u.a.createElement("option",null,"Loading..."))),u.a.createElement(d.a,{md:"5"}))),u.a.createElement("hr",{style:{marginBottom:0}}),u.a.createElement("span",{onClick:function(){return e.setState({hide:!e.state.hide})},style:{color:"blue",cursor:"pointer"}},"[ ",this.state.hide?"Show Filter":"Hide"," ]"),u.a.createElement("br",null),u.a.createElement("br",null),u.a.createElement(x.a,{data:this.state.data,columns:this.columns,loading:this.state.loading,handleRespone:this.handleRespone}))))))))}}]),t}(c.Component)}}]);
//# sourceMappingURL=46.fa59ecda.chunk.js.map