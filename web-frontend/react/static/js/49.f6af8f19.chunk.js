(this["webpackJsonpmjc-apps"]=this["webpackJsonpmjc-apps"]||[]).push([[49],{513:function(e,a,t){"use strict";t.d(a,"b",(function(){return s})),t.d(a,"d",(function(){return l})),t.d(a,"c",(function(){return c})),t.d(a,"a",(function(){return o}));var n=t(531),r=t.n(n);function i(e){return"http://localhost/MJC/backend/public/"+e}function s(e){return"http://localhost/MJC/backend/storage/app/"+e}function l(e){return r.a.stringify(e)}function c(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/x-www-form-urlencoded";return{headers:{"Content-Type":"".concat(a),Authorization:"Bearer ".concat(e)}}}function o(){return{Login:i("api/auth/login"),getOptionCabang:i("api/master/option-cabang"),getOptionLokasi:i("api/master/option-lokasi"),getOptionTiang:i("api/master/option-tiang"),getOptionMerk:i("api/master/option-merk"),getOptionPerusahaan:i("api/master/option-perusahaan"),getOptionPriv:i("api/master/option-privilege"),getOptionMenu:i("api/master/option-menu"),getOptionCctv:i("api/master/option-cctv"),getOptionKegiatan:i("api/master/option-kegiatan"),getMasterTiang:i("api/master/tiang"),postMasterTiang:i("api/master/tiang"),deleteMasterTiang:i("api/master/delete-tiang"),getMasterTiangBy:i("api/master/tiang-by"),updateMasterTiang:i("api/master/update-tiang"),postMasterPerusahaan:i("api/master/perusahaan"),getMasterPerusahaan:i("api/master/perusahaan"),deleteMasterPerusahaan:i("api/master/delete-perusahaan"),getMasterPerusahaanBy:i("api/master/perusahaan-by"),updateMasterPerusahaan:i("api/master/update-perusahaan"),getListAksesCctv:i("api/master/list-akses-cctv"),postListAksesCctv:i("api/master/list-akses-cctv"),getMasterLokasi:i("api/master/lokasi"),postMasterLokasi:i("api/master/lokasi"),deleteMasterLokasi:i("api/master/delete-lokasi"),getMasterLokasiBy:i("api/master/lokasi-by"),updateMasterLokasi:i("api/master/update-lokasi"),getMasterCabang:i("api/master/cabang"),postMasterCabang:i("api/master/cabang"),deleteMasterCabang:i("api/master/delete-cabang"),getMasterCabangBy:i("api/master/cabang-by"),updateMasterCabang:i("api/master/update-cabang"),getMasterMerk:i("api/master/merk"),postMasterMerk:i("api/master/merk"),deleteMasterMerk:i("api/master/delete-merk"),getMasterMerkBy:i("api/master/merk-by"),updateMasterMerk:i("api/master/update-merk"),getMasterCctv:i("api/master/cctv"),postMasterCctv:i("api/master/cctv"),deleteMasterCctv:i("api/master/delete-cctv"),getMasterCctvBy:i("api/master/cctv-by"),updateMasterCctv:i("api/master/update-cctv"),detailMasterCctv:i("api/master/detail-cctv"),getMasterUser:i("api/master/user"),postMasterUser:i("api/master/user"),statusMasterUser:i("api/master/status-user"),getMasterUserBy:i("api/master/user-by"),updateMasterUser:i("api/master/update-user"),detailMasterUser:i("api/master/detail-user"),getMasterPrivilege:i("api/master/privilege"),postMasterPrivilege:i("api/master/privilege"),deleteMasterPrivilege:i("api/master/delete-privilege"),getMasterPrivilegeBy:i("api/master/privilege-by"),updateMasterPrivilege:i("api/master/update-privilege"),getListPermission:i("api/master/list-permission"),postListPermission:i("api/master/list-permission"),getMasterMenu:i("api/master/menu"),postMasterMenu:i("api/master/menu"),deleteMasterMenu:i("api/master/delete-menu"),getMasterMenuBy:i("api/master/menu-by"),updateMasterMenu:i("api/master/update-menu"),getMasterSubmenu:i("api/master/sub-menu"),postMasterSubmenu:i("api/master/sub-menu"),deleteMasterSubmenu:i("api/master/delete-sub-menu"),getMasterSubmenuBy:i("api/master/sub-menu-by"),updateMasterSubmenu:i("api/master/update-sub-menu"),postMaintenance:i("api/maintenance/save"),getMaintenance:i("api/maintenance/list"),deleteMaintenance:i("api/maintenance/delete"),detailMaintenance:i("api/maintenance/detail"),getMaintenanceBy:i("api/maintenance/update-by"),updateMaintenance:i("api/maintenance/update")}}},517:function(e,a,t){"use strict";t.d(a,"c",(function(){return E})),t.d(a,"b",(function(){return M})),t.d(a,"d",(function(){return C})),t.d(a,"a",(function(){return y}));var n=t(512),r=t(2),i=t.n(r),s=t(838),l=t(863),c=t(571),o=t(839),u=t(508),m=t(509),d=t(538),p=t.n(d),g=t(527),h=t.n(g),f=t(507),b=t.n(f),v=(t(528),t(523));function k(e){var a="Mengalami masalah";if(e&&""===e.message)switch(e.type){case"required":a="Wajib di isi.";break;case"min":a="Kurang dari nilai minimal.";break;case"max":a="Lebih dari nilai maksimal.";break;case"minLength":a="Panjang karakter kurang.";break;case"maxLength":a="Panjang karakter lebih."}else if(e)switch(e.type){case"required":a=e.message;break;case"min":a="Nilai harus lebih dari: "+e.message;break;case"max":a="Nilai harus kurang dari: "+e.message;break;case"minLength":a="Panjang karakter harus lebih dari: "+e.message;break;case"maxLength":a="Panjang karakter harus kurang dari: "+e.message;break;default:a=e.message}return a}function E(e){var a=k(e.errors[e.name]);return i.a.createElement(s.a,null,i.a.createElement(l.a,null,e.label),i.a.createElement(c.a,{name:e.name,invalid:e.errors[e.name]&&!0,onChange:e.onChange,innerRef:e.refs,type:e.type,value:e.value,rows:e.rows,disabled:!!e.disabled&&e.disabled}),i.a.createElement(o.a,null,e.errors[e.name]&&a))}function M(e){var a=Object(r.useState)(e.value),t=Object(n.a)(a,2),u=t[0],m=t[1],d=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;m(t),e.onChange&&e.onChange(a,t)},p=k(e.errors[e.name]);return i.a.createElement(s.a,null,i.a.createElement(l.a,null,e.label),i.a.createElement(c.a,{type:"file",onChange:function(e){return function(e){if(e.target.files[0])if("image"!==e.target.files[0].type.split("/")[0])b.a.fire({title:"Error!",text:"Hanya File Gambar",icon:"error",confirmButtonText:"OK"}),d(e);else{var a=!1;e.target.files[0]&&(a=!0),a&&h.a.imageFileResizer(e.target.files[0],600,600,"PNG",100,0,(function(a){d(e,a)}),"base64")}else d(e)}(e)},accept:"image/*"}),u?i.a.createElement("img",{style:{width:"120px"},src:u}):null,i.a.createElement(c.a,{innerRef:e.refs,type:"hidden",name:e.name,invalid:e.errors[e.name]&&!0,value:u||""}),i.a.createElement(o.a,null,e.errors[e.name]&&p))}function y(e){var a=k(e.errors[e.name]),t=null,d=null,g=Object(r.useState)(e.value),h=Object(n.a)(g,2),f=h[0],b=h[1];e.value&&(t=v(e.value).format("YYYY-MM-DD"),d=v(e.value).format("HH:mm"));var E=Object(r.useState)(t),M=Object(n.a)(E,2),y=M[0],C=M[1],O=Object(r.useState)(d),j=Object(n.a)(O,2),x=j[0],S=j[1];return i.a.createElement(s.a,null,i.a.createElement(l.a,null,e.label),i.a.createElement(u.a,null,i.a.createElement(m.a,{md:"8"},i.a.createElement(p.a,{onChange:function(a){return function(a){var t=null;if("string"===typeof a)b(null),console.log("is string");else{var n=a._d;n.getDate(),n.getMonth(),n.getFullYear();t=v(n).format("YYYY-MM-DD"),C(t),null!==x&&b(t+" "+x)}e.onChange&&e.onChange(a)}(a)},dateFormat:"dddd, DD MMMM YYYY",timeFormat:!1,locale:"id",value:y&&v(y).format("dddd, DD MMMM YYYY")})),i.a.createElement(m.a,{md:"4"},i.a.createElement(p.a,{onChange:function(a){return function(a){var t=null;if("string"===typeof a)b(null),console.log("is string");else{var n=a._d;n.getHours(),n.getMinutes(),n.getSeconds();t=v(n).format("HH:mm"),S(t),null!==y&&b(y+" "+t)}e.onChange&&e.onChange(a)}(a)},dateFormat:!1,timeFormat:"HH:mm",locale:"id",value:x}))),i.a.createElement(c.a,{innerRef:e.refs,type:"hidden",name:e.name,invalid:e.errors[e.name]&&!0,value:f||""}),i.a.createElement(o.a,null,e.errors[e.name]&&a))}function C(e){var a=k(e.errors[e.name]);return i.a.createElement(s.a,null,i.a.createElement(l.a,null,e.label),i.a.createElement(c.a,{name:e.name,invalid:e.errors[e.name]&&!0,onChange:e.onChange,innerRef:e.refs,type:"select",value:e.value},e.data.map((function(e,a){return i.a.createElement("option",{key:a,value:e.value},e.name)}))),i.a.createElement(o.a,null,e.errors[e.name]&&a))}},518:function(e,a,t){"use strict";t.d(a,"b",(function(){return i})),t.d(a,"a",(function(){return s})),t.d(a,"c",(function(){return l}));var n=t(507),r=t.n(n);function i(e){if(1===e.api_status)return!0;0===e.api_status?r.a.fire({title:"Error!",text:e.api_message,icon:"error",confirmButtonText:"OK"}):401===e.api_status&&(localStorage.removeItem("token"),localStorage.removeItem("ListMenu"),r.a.fire({title:"Auth Failed!",text:e.api_message,icon:"error",confirmButtonText:"OK",allowOutsideClick:!1,allowEscapeKey:!1}).then((function(e){window.location.reload(!0)})))}function s(){r.a.fire({title:"Wait",timerProgressBar:!0,allowOutsideClick:!1,allowEscapeKey:!1,onBeforeOpen:function(){r.a.showLoading()}})}function l(e){for(var a="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=t.length,r=0;r<e;r++)a+=t.charAt(Math.floor(Math.random()*n));return a}},519:function(e,a,t){"use strict";var n=t(152),r=t(153),i=t(156),s=t(154),l=t(155),c=t(2),o=t.n(c),u=t(508),m=t(509),d=t(838),p=t(571),g=t(569),h=t(570),f=t(521),b=t(572),v=t(533),k="LEFT",E="RIGHT",M=function(e,a){for(var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=e,r=[];n<=a;)r.push(n),n+=t;return r},y=function(e){function a(e){var t;Object(n.a)(this,a),(t=Object(i.a)(this,Object(s.a)(a).call(this,e))).gotoPage=function(e){var a=t.props.onPageChanged,n=void 0===a?function(e){return e}:a,r=Math.max(0,Math.min(e,Math.ceil(t.props.totalRecords/t.props.pageLimit))),i={currentPage:r,totalPages:Math.ceil(t.props.totalRecords/t.props.pageLimit),pageLimit:t.props.pageLimit,totalRecords:t.props.totalRecords};t.setState({currentPage:r},(function(){return n(i)}))},t.handleClick=function(e){return function(a){a.preventDefault(),t.gotoPage(e)}},t.handleMoveLeft=function(e){e.preventDefault(),t.gotoPage(t.state.currentPage-2*t.pageNeighbours-1)},t.handleMoveRight=function(e){e.preventDefault(),t.gotoPage(t.state.currentPage+2*t.pageNeighbours+1)},t.fetchPageNumbers=function(){var e=Math.ceil(t.props.totalRecords/t.props.pageLimit),a=t.state.currentPage,n=t.pageNeighbours,r=2*t.pageNeighbours+3;if(e>r+2){var i=Math.max(2,a-n),s=Math.min(e-1,a+n),l=M(i,s),c=i>2,o=e-s>1,u=r-(l.length+1);switch(!0){case c&&!o:var m=M(i-u,i-1);l=[k].concat(Object(v.a)(m),Object(v.a)(l));break;case!c&&o:var d=M(s+1,s+u);l=[].concat(Object(v.a)(l),Object(v.a)(d),[E]);break;case c&&o:default:l=[k].concat(Object(v.a)(l),[E])}return[1].concat(Object(v.a)(l),[e])}return M(1,e)};var r=e.totalRecords,l=void 0===r?null:r,c=e.pageLimit,o=void 0===c?30:c,u=e.pageNeighbours,m=void 0===u?0:u;return t.pageLimit="number"===typeof o?o:30,t.totalRecords="number"===typeof l?l:0,t.pageNeighbours="number"===typeof m?Math.max(0,Math.min(m,2)):0,t.totalPages=Math.ceil(t.totalRecords/t.pageLimit),t.state={currentPage:1},t}return Object(l.a)(a,e),Object(r.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.pageLimit!==this.props.pageLimit&&this.gotoPage(1)}},{key:"componentDidMount",value:function(){this.gotoPage(1)}},{key:"render",value:function(){var e=this;if(!this.props.totalRecords||1===Math.ceil(this.props.totalRecords/this.props.pageLimit))return null;var a=this.state.currentPage,t=this.fetchPageNumbers();return o.a.createElement(c.Fragment,null,o.a.createElement("nav",{"aria-label":"Countries Pagination"},o.a.createElement("ul",{className:"pagination pull-right"},t.map((function(t,n){return t===k?o.a.createElement("li",{key:n,className:"page-item"},o.a.createElement("a",{className:"page-link",href:"#","aria-label":"Previous",onClick:e.handleMoveLeft},o.a.createElement("span",{"aria-hidden":"true"},"\xab"),o.a.createElement("span",{className:"sr-only"},"Previous"))):t===E?o.a.createElement("li",{key:n,className:"page-item"},o.a.createElement("a",{className:"page-link",href:"#","aria-label":"Next",onClick:e.handleMoveRight},o.a.createElement("span",{"aria-hidden":"true"},"\xbb"),o.a.createElement("span",{className:"sr-only"},"Next"))):o.a.createElement("li",{key:n,className:"page-item".concat(a===t?" active":"")},o.a.createElement("a",{className:"page-link",href:"#",onClick:e.handleClick(t)},t))})))))}}]),a}(c.Component);t.d(a,"a",(function(){return C}));var C=function(e){function a(e){var t;return Object(n.a)(this,a),(t=Object(i.a)(this,Object(s.a)(a).call(this,e))).onPageChanged=function(e){var a=e.currentPage;t.setState({page:a},(function(){t.FilterResult()}))},t.handleSearch=function(e){t.setState({search:e.target.value,page:1},(function(){t.FilterResult()}))},t.handleRow=function(e){t.setState({row:e.target.value,page:1},(function(){t.FilterResult()}))},t.state={sort:null,sortStatus:0,page:1,search:"",row:5},t}return Object(l.a)(a,e),Object(r.a)(a,[{key:"Sorting",value:function(e){var a,t=this;e===this.state.sort?(0===this.state.sortStatus?a=1:1===this.state.sortStatus?a=2:(a=0,e=null),this.setState({sort:e,sortStatus:a},(function(){t.FilterResult()}))):this.setState({sort:e,sortStatus:1},(function(){t.FilterResult()}))}},{key:"encodeQueryData",value:function(e){var a=[];for(var t in e)e[t]&&a.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return a.join("&")}},{key:"FilterResult",value:function(){var e={page:this.state.page,row:this.state.row,search:this.state.search,by:this.state.sort,sort:this.state.sortStatus};this.props.handleRespone({query:this.encodeQueryData(e)})}},{key:"HeaderField",value:function(e){for(var a=this,t=["fa fa-sort fa-sm mt-2","fa fa-sort-asc fa-sm mt-2","fa fa-sort-desc fa-sm mt-2"],n=["#bfbfbf","black","black"],r=[],i=function(i){l=e[i].width?e[i].width:null,null!==e[i].field&&!1!==e[i].sort?r.push(o.a.createElement("th",{width:l,style:{cursor:"pointer"},onClick:function(){return a.Sorting(e[i].field)},key:i},e[i].title,"  ",o.a.createElement("i",{style:{color:a.state.sort===e[i].field?n[a.state.sortStatus]:n[0]},className:a.state.sort===e[i].field?t[a.state.sortStatus]:t[0]}))):r.push(o.a.createElement("th",{width:l,key:i},e[i].title))},s=0;s<e.length;s++){var l;i(s)}return o.a.createElement("thead",null,o.a.createElement("tr",null,r))}},{key:"ListValue",value:function(e,a){var t;if(null!=e){var n=e.from;t=e.data.map((function(e,t){for(var r=[],i=0;i<a.length;i++)a[i].template?r.push(o.a.createElement("td",{key:i},a[i].template(e,t,n++))):r.push(o.a.createElement("td",{key:i},e[a[i].field]));return o.a.createElement("tr",{key:t},r)}))}return t}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,null,o.a.createElement(m.a,{xs:"12",sm:"6",md:"6"},o.a.createElement(d.a,{row:!0},o.a.createElement(m.a,{xs:"12",sm:"6",md:"4"},o.a.createElement(p.a,{onChange:this.handleRow,type:"select",name:"rows",id:"rows"},o.a.createElement("option",{value:"5"},"5 Rows"),o.a.createElement("option",{value:"10"},"10 Rows"),o.a.createElement("option",{value:"15"},"15 Rows"),o.a.createElement("option",{value:"20"},"20 Rows"),o.a.createElement("option",{value:"25"},"25 Rows"),o.a.createElement("option",{value:"30"},"30 Rows"))))),o.a.createElement(m.a,{xs:"12",sm:"6",md:"6"},o.a.createElement(d.a,{row:!0},o.a.createElement(m.a,{md:"12"},o.a.createElement(g.a,{className:"pull-bottom"},o.a.createElement(h.a,{addonType:"prepend"},o.a.createElement(f.a,{type:"button",color:"primary"},o.a.createElement("i",{className:"fa fa-search"})," Search")),o.a.createElement(p.a,{onChange:this.handleSearch,type:"text",id:"input1-group2",name:"input1-group2",placeholder:"Type Here....."})))))),o.a.createElement(b.a,{hover:!0,bordered:!0,striped:!0,responsive:!0},this.HeaderField(this.props.columns),o.a.createElement("tbody",null,this.props.loading?o.a.createElement("tr",null,o.a.createElement("td",{colSpan:this.props.columns.length,align:"center"},"Loading...")):this.ListValue(this.props.data,this.props.columns))),null!=this.props.data?o.a.createElement(u.a,null,o.a.createElement(m.a,{xs:"12",sm:"6",md:"6"},o.a.createElement("dt",null,"Showing ",this.props.data.from," to ",this.props.data.to," of ",this.props.data.total," entries")),o.a.createElement(m.a,{xs:"12",sm:"6",md:"6"},o.a.createElement(y,{totalRecords:this.props.data.total,pageLimit:parseInt(this.props.data.per_page),pageNeighbours:1,onPageChanged:this.onPageChanged}))):null)}}]),a}(c.Component)},937:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return R}));var n=t(152),r=t(153),i=t(156),s=t(154),l=t(155),c=t(512),o=t(2),u=t.n(o),m=t(508),d=t(509),p=t(514),g=t(516),h=t(521),f=t(515),b=t(664),v=t(838),k=t(863),E=t(571),M=t(530),y=t.n(M),C=t(507),O=t.n(C),j=t(519),x=t(517),S=t(518),P=t(540),N=t(513),w=t(539),_=t(158);function L(e){var a=Object(P.a)(),t=a.register,n=a.handleSubmit,r=a.errors,i=a.reset,s=Object(o.useState)(!1),l=Object(c.a)(s,2),v=l[0],k=l[1];return u.a.createElement(m.a,null,u.a.createElement(d.a,{xs:"12",sm:"12",md:"12"},u.a.createElement(p.a,null,u.a.createElement(g.a,null,u.a.createElement("strong",null,"Tambah Data"),u.a.createElement("div",{className:"card-header-actions"},u.a.createElement(h.a,{onClick:function(){return e.onClick()},block:!0,outline:!0,color:"primary"},u.a.createElement("i",{className:"fa fa-remove"})," ",u.a.createElement("span",null,"Hide")))),u.a.createElement(f.a,null,u.a.createElement(b.a,{onSubmit:n((function(a){O.a.fire({title:"Apakah anda yakin ? ",icon:"info",text:"Menambah data ini ?",showCancelButton:!0,focusConfirm:!1,confirmButtonText:"Ya",cancelButtonText:"Cancel"}).then((function(t){t.value&&(k(!0),y.a.post(Object(N.a)().postMasterPerusahaan,Object(N.d)(a),Object(N.c)(localStorage.getItem("token"))).then((function(a){var t=a.data;Object(S.b)(t)&&(O.a.fire({title:"Sukses!",text:t.api_message,icon:"success",confirmButtonText:"OK"}),k(!1),i(),e.refreshData(!0))})).catch((function(e){O.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"}),k(!1)})))}))}))},u.a.createElement(x.c,{refs:t({required:!0,maxLength:{value:200,message:"200"}}),name:"nama",label:"Nama Perusahaan",type:"text",errors:r}),u.a.createElement(x.c,{refs:t({required:!0,maxLength:{value:20,message:"20"}}),name:"alias",label:"Alias",type:"text",errors:r}),u.a.createElement(x.d,{refs:t({required:!0}),name:"intern",label:"Perusahaan Intern",errors:r,data:[{value:"Y",name:"Ya"},{value:"N",name:"Tidak"}]}),u.a.createElement(x.c,{refs:t({required:!0,maxLength:{value:2e3,message:"2000"}}),name:"keterangan",label:"Keterangan",type:"textarea",errors:r}),u.a.createElement(h.a,{type:"submit",size:"sm",color:"primary",disabled:v}," ",v?u.a.createElement(w.MetroSpinner,{size:16,color:"#fff"}):u.a.createElement("span",null,u.a.createElement("i",{className:"fa fa-dot-circle-o"})," Submit")))))))}function B(e){var a=Object(P.a)({defaultValues:{nama:e.data.nama_perusahaan,alias:e.data.alias,intern:e.data.intern,keterangan:e.data.keterangan}}),t=a.register,n=a.handleSubmit,r=a.errors,i=a.reset,s=Object(o.useState)(!1),l=Object(c.a)(s,2),v=l[0],k=l[1];return u.a.createElement(m.a,null,u.a.createElement(d.a,{xs:"12",sm:"12",md:"12"},u.a.createElement(p.a,null,u.a.createElement(g.a,null,u.a.createElement("strong",null,"Ubah Data"),u.a.createElement("div",{className:"card-header-actions"},u.a.createElement(h.a,{onClick:function(){return e.onClick()},block:!0,outline:!0,color:"primary"},u.a.createElement("i",{className:"fa fa-remove"})," ",u.a.createElement("span",null,"Hide")))),u.a.createElement(f.a,null,u.a.createElement(b.a,{onSubmit:n((function(a){O.a.fire({title:"Apakah anda yakin ? ",icon:"info",text:"Merubah data ini ?",showCancelButton:!0,focusConfirm:!1,confirmButtonText:"Ya",cancelButtonText:"Cancel"}).then((function(t){t.value&&(k(!0),y.a.post(Object(N.a)().updateMasterPerusahaan,Object(N.d)(a),Object(N.c)(localStorage.getItem("token"))).then((function(a){var t=a.data;Object(S.b)(t)&&(O.a.fire({title:"Sukses!",text:t.api_message,icon:"success",confirmButtonText:"OK"}),k(!1),i(),e.onClick(),e.refreshData(!0))})).catch((function(e){O.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"}),k(!1)})))}))}))},u.a.createElement("input",{ref:t(),type:"hidden",name:"id",value:e.data.id_perusahaan}),u.a.createElement(x.c,{refs:t({required:!0,maxLength:{value:200,message:"200"}}),name:"nama",label:"Nama Perusahaan",type:"text",errors:r}),u.a.createElement(x.c,{refs:t({required:!0,maxLength:{value:20,message:"20"}}),name:"alias",label:"Alias",type:"text",errors:r}),u.a.createElement(x.d,{refs:t({required:!0}),name:"intern",label:"Perusahaan Intern",errors:r,data:[{value:"Y",name:"Ya"},{value:"N",name:"Tidak"}]}),u.a.createElement(x.c,{refs:t({required:!0,maxLength:{value:2e3,message:"2000"}}),name:"keterangan",label:"Keterangan",type:"textarea",errors:r}),u.a.createElement(h.a,{type:"submit",size:"sm",color:"primary",disabled:v}," ",v?u.a.createElement(w.MetroSpinner,{size:16,color:"#fff"}):u.a.createElement("span",null,u.a.createElement("i",{className:"fa fa-dot-circle-o"})," Ubah")))))))}function T(e){var a=Object(P.a)(),t=a.register,n=a.handleSubmit,r=(a.errors,a.reset,Object(o.useState)({status:!0,data:[]})),i=Object(c.a)(r,2),s=i[0],l=i[1],M=Object(o.useState)(!1),C=Object(c.a)(M,2),j=C[0],x=C[1],L=Object(o.useState)(!1),B=Object(c.a)(L,2),T=B[0],R=B[1];function A(e,a){R(!0),y.a.get(Object(N.a)().getListAksesCctv+"?id_cabang="+e+"&id_perusahaan="+a,Object(N.c)(localStorage.getItem("token"))).then((function(e){var a=e.data;Object(S.b)(a)&&(l({status:s.status,data:a.data}),console.log(s))})).catch((function(e){O.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"})}))}function D(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=e.target.value,n=e.target.checked;l((function(e){var r=e.status,i=e.data,s=i,l=!0;if(a)for(var c=0;c<i.length;c++){s[c].nama_lokasi=i[c].nama_lokasi,s[c].id_lokasi=i[c].id_lokasi,s[c].isChecked=i[c].id_lokasi==t?n:i[c].isChecked;for(var o=0;o<i[c].data.length;o++)s[c].data[o].id_cctv=i[c].data[o].id_cctv,s[c].data[o].id_lokasi=i[c].data[o].id_lokasi,s[c].data[o].kode_cctv=i[c].data[o].kode_cctv,s[c].data[o].nama_cctv=i[c].data[o].nama_cctv,s[c].data[o].isChecked=i[c].data[o].id_lokasi==t?n:i[c].data[o].isChecked}else for(var u=0;u<i.length;u++){s[u].nama_lokasi=i[u].nama_lokasi,s[u].id_lokasi=i[u].id_lokasi;for(var m=0;m<i[u].data.length;m++)s[u].data[m].id_cctv=i[u].data[m].id_cctv,s[u].data[m].id_lokasi=i[u].data[m].id_lokasi,s[u].data[m].kode_cctv=i[u].data[m].kode_cctv,s[u].data[m].nama_cctv=i[u].data[m].nama_cctv,s[u].data[m].isChecked=i[u].data[m].id_cctv==t?n:i[u].data[m].isChecked,l=s[u].data[m].isChecked*l;s[u].isChecked=l,l=!0}return{status:r=!r,data:i=s}}))}return Object(o.useEffect)((function(){T||A(e.optionCabang[0].value,e.dataAkses.id_perusahaan)}),[s]),u.a.createElement("div",{className:"animated fadeIn"},u.a.createElement(m.a,null,u.a.createElement(d.a,{xs:"12",sm:"12",md:"12"},u.a.createElement(p.a,null,u.a.createElement(g.a,null,u.a.createElement("strong",null,"Akses CCTV (Perusahaan: ",e.dataAkses.nama_perusahaan,")"),u.a.createElement("div",{className:"card-header-actions"},u.a.createElement(h.a,{onClick:function(){return e.pageAkses(!1)},color:"warning"},u.a.createElement("i",{className:"cui-chevron-left"})," ",u.a.createElement("span",null,"Back")))),u.a.createElement(f.a,null,u.a.createElement(b.a,{onSubmit:n((function(e){O.a.fire({title:"Apakah anda yakin ? ",icon:"info",text:"Menyimpan data ini ?",showCancelButton:!0,focusConfirm:!1,confirmButtonText:"Ya",cancelButtonText:"Cancel"}).then((function(a){a.value&&(x(!0),y.a.post(Object(N.a)().postListAksesCctv,Object(N.d)(e),Object(N.c)(localStorage.getItem("token"))).then((function(e){var a=e.data;Object(S.b)(a)&&(O.a.fire({title:"Sukses!",text:a.api_message,icon:"success",confirmButtonText:"OK"}),x(!1))})).catch((function(e){O.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"}),x(!1)})))}))}))},u.a.createElement("input",{ref:t(),type:"hidden",name:"id",value:e.dataAkses.id_perusahaan}),u.a.createElement(v.a,{row:!0},u.a.createElement(d.a,{md:"1"},u.a.createElement(k.a,null,"Cabang")),u.a.createElement(d.a,{md:"5"},u.a.createElement(E.a,{name:"cabang",type:"select",innerRef:t(),onChange:function(a){return t=a,n=e.dataAkses.id_perusahaan,void A(t.target.value,n);var t,n}},e.optionCabang?e.optionCabang.map((function(e,a){return u.a.createElement("option",{key:a,value:e.value},e.name)})):u.a.createElement("option",null,"Loading..."))),u.a.createElement(d.a,{md:"5"},u.a.createElement(_.Link,{to:"/master/cabang"},u.a.createElement(h.a,{title:"Lihat Cabang",className:"btn-info btn-brand icon"},u.a.createElement("span",{style:{color:"white"}},u.a.createElement("i",{className:"cui-list"})))))),u.a.createElement("hr",null),u.a.createElement(m.a,null,s.data.map((function(e,a){return u.a.createElement(d.a,{key:a,xs:"12",sm:"6",md:"4"},u.a.createElement(p.a,null,u.a.createElement(g.a,null,u.a.createElement(v.a,{check:!0,className:"checkbox"},u.a.createElement(E.a,{onChange:function(e){return D(e,!0)},checked:e.isChecked,className:"form-check-input",type:"checkbox",name:"checkall",value:e.id_lokasi}),u.a.createElement(k.a,{check:!0,className:"form-check-label"},e.nama_lokasi))),u.a.createElement(f.a,null,u.a.createElement(v.a,{row:!0},u.a.createElement(d.a,{md:"12"},e.data.map((function(e,a){return u.a.createElement(v.a,{key:a,check:!0,className:"checkbox"},u.a.createElement(E.a,{onChange:function(e){return D(e)},checked:e.isChecked,className:"form-check-input",innerRef:t(),type:"checkbox",name:"cctv",value:e.id_cctv}),u.a.createElement(k.a,{check:!0,className:"form-check-label"},e.kode_cctv+" ("+e.nama_cctv+")"))})))))))}))),u.a.createElement(h.a,{type:"submit",size:"sm",color:"primary",disabled:j}," ",j?u.a.createElement(w.MetroSpinner,{size:16,color:"#fff"}):u.a.createElement("span",null,u.a.createElement("i",{className:"fa fa-dot-circle-o"})," Submit"))))))))}var R=function(e){function a(e){var t;return Object(n.a)(this,a),(t=Object(i.a)(this,Object(s.a)(a).call(this,e))).columns=[{title:"",field:null,width:120,template:function(e){return u.a.createElement(u.a.Fragment,null,u.a.createElement(h.a,{onClick:function(){return t.doDelete(e.id_perusahaan)},title:"Hapus",className:"btn-danger btn-brand icon btn-sm"},u.a.createElement("i",{className:"cui-trash"}))," ","   ",u.a.createElement(h.a,{onClick:function(){return t.doUpdate(e.id_perusahaan)},title:"Ubah",className:"btn-stack-overflow btn-brand icon btn-sm"},u.a.createElement("i",{className:"cui-pencil"}))," ","   ",u.a.createElement(h.a,{onClick:function(){return t.doAkses(e.id_perusahaan)},title:"Akses CCTV",className:"btn-success btn-brand icon btn-sm"},u.a.createElement("i",{className:"fa fa-sitemap"})))}},{title:"Nama Perusahaan",field:"nama_perusahaan"},{title:"Alias",field:"alias",width:200},{title:"Intern",field:"intern",width:80,template:function(e){return"Y"===e.intern?"Ya":"Tidak"}},{title:"Keterangan",field:"keterangan",width:350}],t.handleRespone=function(e){var a=e.query;t.setState({query:a},(function(){t.getData()}))},t.state={data:null,loading:!0,query:"page=1&row=5",pageLoading:!1,pageAdd:!1,pageUpdate:!1,dataUpdate:null,pageAkses:!1,dataAkses:null},t}return Object(l.a)(a,e),Object(r.a)(a,[{key:"componentDidMount",value:function(){this.getData(),this.getCabang()}},{key:"doAkses",value:function(e){var a=this;window.scrollTo(0,0),this.setState({pageLoading:!0,dataAkses:null}),y.a.get(Object(N.a)().getMasterPerusahaanBy+"?id="+e,Object(N.c)(localStorage.getItem("token"))).then((function(e){var t=e.data;Object(S.b)(t)&&a.setState({pageAkses:!0,dataAkses:t.data,pageLoading:!1})})).catch((function(e){O.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"})}))}},{key:"getData",value:function(){var e=this;this.setState({loading:!0}),y.a.get(Object(N.a)().getMasterPerusahaan+"?"+this.state.query,Object(N.c)(localStorage.getItem("token"))).then((function(a){var t=a.data;Object(S.b)(t)&&e.setState({data:t.data,loading:!1})})).catch((function(e){O.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"})}))}},{key:"doDelete",value:function(e){var a=this;O.a.fire({title:"Apakah anda yakin ? ",icon:"info",text:"Menghapus data ini ?",showCancelButton:!0,focusConfirm:!1,confirmButtonText:"Ya",cancelButtonText:"Cancel"}).then((function(t){t.value&&(Object(S.a)(),y.a.post(Object(N.a)().deleteMasterPerusahaan,Object(N.d)({id:e}),Object(N.c)(localStorage.getItem("token"))).then((function(e){var t=e.data;Object(S.b)(t)&&(O.a.fire({title:"Sukses!",text:t.api_message,icon:"success",confirmButtonText:"OK"}),a.getData())})).catch((function(e){O.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"})})))}))}},{key:"doUpdate",value:function(e){var a=this;window.scrollTo(0,0),this.setState({dataUpdate:null,pageUpdate:!1,pageLoading:!0,pageAdd:!1}),y.a.get(Object(N.a)().getMasterPerusahaanBy+"?id="+e,Object(N.c)(localStorage.getItem("token"))).then((function(e){var t=e.data;Object(S.b)(t)&&a.setState({dataUpdate:t.data,pageUpdate:!0,pageLoading:!1})})).catch((function(e){O.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"})}))}},{key:"getCabang",value:function(){var e=this;y.a.get(Object(N.a)().getOptionCabang,Object(N.c)(localStorage.getItem("token"))).then((function(a){var t=a.data;Object(S.b)(t)&&e.setState({optionCabang:t.data})})).catch((function(e){O.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"})}))}},{key:"render",value:function(){var e=this;return this.state.pageAkses?u.a.createElement(u.a.Fragment,null,u.a.createElement(T,{pageAkses:function(a){return e.setState({pageAkses:a})},optionCabang:this.state.optionCabang,dataAkses:this.state.dataAkses})):u.a.createElement(u.a.Fragment,null,u.a.createElement(m.a,{style:{display:"flex",justifyContent:"center",marginBottom:"10px"}},this.state.pageLoading?u.a.createElement(w.MetroSpinner,{size:34,color:"#fff"}):null),this.state.pageAdd?u.a.createElement(L,{onClick:function(){return e.setState({pageAdd:!1})},refreshData:function(a){return e.getData()}}):null,this.state.pageUpdate?u.a.createElement(B,{onClick:function(){return e.setState({pageUpdate:!1})},refreshData:function(a){return e.getData()},data:this.state.dataUpdate}):null,u.a.createElement("div",{className:"animated fadeIn"},u.a.createElement(m.a,null,u.a.createElement(d.a,{xs:"12",sm:"12",md:"12"},u.a.createElement(p.a,null,u.a.createElement(g.a,null,u.a.createElement("strong",null,"Perusahaan"),u.a.createElement("div",{className:"card-header-actions"},this.state.pageAdd?null:u.a.createElement(h.a,{onClick:function(){return e.setState({pageAdd:!0,pageUpdate:!1})},block:!0,outline:!0,color:"primary"},u.a.createElement("i",{className:"fa fa-plus-circle"})," ",u.a.createElement("span",null,"Tambah")))),u.a.createElement(f.a,null,u.a.createElement(j.a,{data:this.state.data,columns:this.columns,loading:this.state.loading,handleRespone:this.handleRespone})))))))}}]),a}(o.Component)}}]);
//# sourceMappingURL=49.f6af8f19.chunk.js.map