(this["webpackJsonpmjc-apps"]=this["webpackJsonpmjc-apps"]||[]).push([[23],{513:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"d",(function(){return c})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return s}));var n=a(531),r=a.n(n);function l(e){return"http://localhost/MJC/backend/public/"+e}function i(e){return"http://localhost/MJC/backend/storage/app/"+e}function c(e){return r.a.stringify(e)}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/x-www-form-urlencoded";return{headers:{"Content-Type":"".concat(t),Authorization:"Bearer ".concat(e)}}}function s(){return{Login:l("api/auth/login"),getOptionCabang:l("api/master/option-cabang"),getOptionLokasi:l("api/master/option-lokasi"),getOptionTiang:l("api/master/option-tiang"),getOptionMerk:l("api/master/option-merk"),getOptionPerusahaan:l("api/master/option-perusahaan"),getOptionPriv:l("api/master/option-privilege"),getOptionMenu:l("api/master/option-menu"),getOptionCctv:l("api/master/option-cctv"),getOptionKegiatan:l("api/master/option-kegiatan"),getMasterTiang:l("api/master/tiang"),postMasterTiang:l("api/master/tiang"),deleteMasterTiang:l("api/master/delete-tiang"),getMasterTiangBy:l("api/master/tiang-by"),updateMasterTiang:l("api/master/update-tiang"),postMasterPerusahaan:l("api/master/perusahaan"),getMasterPerusahaan:l("api/master/perusahaan"),deleteMasterPerusahaan:l("api/master/delete-perusahaan"),getMasterPerusahaanBy:l("api/master/perusahaan-by"),updateMasterPerusahaan:l("api/master/update-perusahaan"),getListAksesCctv:l("api/master/list-akses-cctv"),postListAksesCctv:l("api/master/list-akses-cctv"),getMasterLokasi:l("api/master/lokasi"),postMasterLokasi:l("api/master/lokasi"),deleteMasterLokasi:l("api/master/delete-lokasi"),getMasterLokasiBy:l("api/master/lokasi-by"),updateMasterLokasi:l("api/master/update-lokasi"),getMasterCabang:l("api/master/cabang"),postMasterCabang:l("api/master/cabang"),deleteMasterCabang:l("api/master/delete-cabang"),getMasterCabangBy:l("api/master/cabang-by"),updateMasterCabang:l("api/master/update-cabang"),getMasterMerk:l("api/master/merk"),postMasterMerk:l("api/master/merk"),deleteMasterMerk:l("api/master/delete-merk"),getMasterMerkBy:l("api/master/merk-by"),updateMasterMerk:l("api/master/update-merk"),getMasterCctv:l("api/master/cctv"),postMasterCctv:l("api/master/cctv"),deleteMasterCctv:l("api/master/delete-cctv"),getMasterCctvBy:l("api/master/cctv-by"),updateMasterCctv:l("api/master/update-cctv"),detailMasterCctv:l("api/master/detail-cctv"),getMasterUser:l("api/master/user"),postMasterUser:l("api/master/user"),statusMasterUser:l("api/master/status-user"),getMasterUserBy:l("api/master/user-by"),updateMasterUser:l("api/master/update-user"),detailMasterUser:l("api/master/detail-user"),getMasterPrivilege:l("api/master/privilege"),postMasterPrivilege:l("api/master/privilege"),deleteMasterPrivilege:l("api/master/delete-privilege"),getMasterPrivilegeBy:l("api/master/privilege-by"),updateMasterPrivilege:l("api/master/update-privilege"),getListPermission:l("api/master/list-permission"),postListPermission:l("api/master/list-permission"),getMasterMenu:l("api/master/menu"),postMasterMenu:l("api/master/menu"),deleteMasterMenu:l("api/master/delete-menu"),getMasterMenuBy:l("api/master/menu-by"),updateMasterMenu:l("api/master/update-menu"),getMasterSubmenu:l("api/master/sub-menu"),postMasterSubmenu:l("api/master/sub-menu"),deleteMasterSubmenu:l("api/master/delete-sub-menu"),getMasterSubmenuBy:l("api/master/sub-menu-by"),updateMasterSubmenu:l("api/master/update-sub-menu"),postMaintenance:l("api/maintenance/save"),getMaintenance:l("api/maintenance/list"),deleteMaintenance:l("api/maintenance/delete"),detailMaintenance:l("api/maintenance/detail"),getMaintenanceBy:l("api/maintenance/update-by"),updateMaintenance:l("api/maintenance/update")}}},517:function(e,t,a){"use strict";a.d(t,"c",(function(){return k})),a.d(t,"b",(function(){return y})),a.d(t,"d",(function(){return M})),a.d(t,"a",(function(){return O}));var n=a(512),r=a(2),l=a.n(r),i=a(838),c=a(863),o=a(571),s=a(839),u=a(508),m=a(509),d=a(538),p=a.n(d),f=a(527),g=a.n(f),h=a(507),b=a.n(h),E=(a(528),a(523));function v(e){var t="Mengalami masalah";if(e&&""===e.message)switch(e.type){case"required":t="Wajib di isi.";break;case"min":t="Kurang dari nilai minimal.";break;case"max":t="Lebih dari nilai maksimal.";break;case"minLength":t="Panjang karakter kurang.";break;case"maxLength":t="Panjang karakter lebih."}else if(e)switch(e.type){case"required":t=e.message;break;case"min":t="Nilai harus lebih dari: "+e.message;break;case"max":t="Nilai harus kurang dari: "+e.message;break;case"minLength":t="Panjang karakter harus lebih dari: "+e.message;break;case"maxLength":t="Panjang karakter harus kurang dari: "+e.message;break;default:t=e.message}return t}function k(e){var t=v(e.errors[e.name]);return l.a.createElement(i.a,null,l.a.createElement(c.a,null,e.label),l.a.createElement(o.a,{name:e.name,invalid:e.errors[e.name]&&!0,onChange:e.onChange,innerRef:e.refs,type:e.type,value:e.value,rows:e.rows,disabled:!!e.disabled&&e.disabled}),l.a.createElement(s.a,null,e.errors[e.name]&&t))}function y(e){var t=Object(r.useState)(e.value),a=Object(n.a)(t,2),u=a[0],m=a[1],d=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;m(a),e.onChange&&e.onChange(t,a)},p=v(e.errors[e.name]);return l.a.createElement(i.a,null,l.a.createElement(c.a,null,e.label),l.a.createElement(o.a,{type:"file",onChange:function(e){return function(e){if(e.target.files[0])if("image"!==e.target.files[0].type.split("/")[0])b.a.fire({title:"Error!",text:"Hanya File Gambar",icon:"error",confirmButtonText:"OK"}),d(e);else{var t=!1;e.target.files[0]&&(t=!0),t&&g.a.imageFileResizer(e.target.files[0],600,600,"PNG",100,0,(function(t){d(e,t)}),"base64")}else d(e)}(e)},accept:"image/*"}),u?l.a.createElement("img",{style:{width:"120px"},src:u}):null,l.a.createElement(o.a,{innerRef:e.refs,type:"hidden",name:e.name,invalid:e.errors[e.name]&&!0,value:u||""}),l.a.createElement(s.a,null,e.errors[e.name]&&p))}function O(e){var t=v(e.errors[e.name]),a=null,d=null,f=Object(r.useState)(e.value),g=Object(n.a)(f,2),h=g[0],b=g[1];e.value&&(a=E(e.value).format("YYYY-MM-DD"),d=E(e.value).format("HH:mm"));var k=Object(r.useState)(a),y=Object(n.a)(k,2),O=y[0],M=y[1],j=Object(r.useState)(d),C=Object(n.a)(j,2),S=C[0],_=C[1];return l.a.createElement(i.a,null,l.a.createElement(c.a,null,e.label),l.a.createElement(u.a,null,l.a.createElement(m.a,{md:"8"},l.a.createElement(p.a,{onChange:function(t){return function(t){var a=null;if("string"===typeof t)b(null),console.log("is string");else{var n=t._d;n.getDate(),n.getMonth(),n.getFullYear();a=E(n).format("YYYY-MM-DD"),M(a),null!==S&&b(a+" "+S)}e.onChange&&e.onChange(t)}(t)},dateFormat:"dddd, DD MMMM YYYY",timeFormat:!1,locale:"id",value:O&&E(O).format("dddd, DD MMMM YYYY")})),l.a.createElement(m.a,{md:"4"},l.a.createElement(p.a,{onChange:function(t){return function(t){var a=null;if("string"===typeof t)b(null),console.log("is string");else{var n=t._d;n.getHours(),n.getMinutes(),n.getSeconds();a=E(n).format("HH:mm"),_(a),null!==O&&b(O+" "+a)}e.onChange&&e.onChange(t)}(t)},dateFormat:!1,timeFormat:"HH:mm",locale:"id",value:S}))),l.a.createElement(o.a,{innerRef:e.refs,type:"hidden",name:e.name,invalid:e.errors[e.name]&&!0,value:h||""}),l.a.createElement(s.a,null,e.errors[e.name]&&t))}function M(e){var t=v(e.errors[e.name]);return l.a.createElement(i.a,null,l.a.createElement(c.a,null,e.label),l.a.createElement(o.a,{name:e.name,invalid:e.errors[e.name]&&!0,onChange:e.onChange,innerRef:e.refs,type:"select",value:e.value},e.data.map((function(e,t){return l.a.createElement("option",{key:t,value:e.value},e.name)}))),l.a.createElement(s.a,null,e.errors[e.name]&&t))}},518:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return c}));var n=a(507),r=a.n(n);function l(e){if(1===e.api_status)return!0;0===e.api_status?r.a.fire({title:"Error!",text:e.api_message,icon:"error",confirmButtonText:"OK"}):401===e.api_status&&(localStorage.removeItem("token"),localStorage.removeItem("ListMenu"),r.a.fire({title:"Auth Failed!",text:e.api_message,icon:"error",confirmButtonText:"OK",allowOutsideClick:!1,allowEscapeKey:!1}).then((function(e){window.location.reload(!0)})))}function i(){r.a.fire({title:"Wait",timerProgressBar:!0,allowOutsideClick:!1,allowEscapeKey:!1,onBeforeOpen:function(){r.a.showLoading()}})}function c(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=a.length,r=0;r<e;r++)t+=a.charAt(Math.floor(Math.random()*n));return t}},519:function(e,t,a){"use strict";var n=a(152),r=a(153),l=a(156),i=a(154),c=a(155),o=a(2),s=a.n(o),u=a(508),m=a(509),d=a(838),p=a(571),f=a(569),g=a(570),h=a(521),b=a(572),E=a(533),v="LEFT",k="RIGHT",y=function(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=e,r=[];n<=t;)r.push(n),n+=a;return r},O=function(e){function t(e){var a;Object(n.a)(this,t),(a=Object(l.a)(this,Object(i.a)(t).call(this,e))).gotoPage=function(e){var t=a.props.onPageChanged,n=void 0===t?function(e){return e}:t,r=Math.max(0,Math.min(e,Math.ceil(a.props.totalRecords/a.props.pageLimit))),l={currentPage:r,totalPages:Math.ceil(a.props.totalRecords/a.props.pageLimit),pageLimit:a.props.pageLimit,totalRecords:a.props.totalRecords};a.setState({currentPage:r},(function(){return n(l)}))},a.handleClick=function(e){return function(t){t.preventDefault(),a.gotoPage(e)}},a.handleMoveLeft=function(e){e.preventDefault(),a.gotoPage(a.state.currentPage-2*a.pageNeighbours-1)},a.handleMoveRight=function(e){e.preventDefault(),a.gotoPage(a.state.currentPage+2*a.pageNeighbours+1)},a.fetchPageNumbers=function(){var e=Math.ceil(a.props.totalRecords/a.props.pageLimit),t=a.state.currentPage,n=a.pageNeighbours,r=2*a.pageNeighbours+3;if(e>r+2){var l=Math.max(2,t-n),i=Math.min(e-1,t+n),c=y(l,i),o=l>2,s=e-i>1,u=r-(c.length+1);switch(!0){case o&&!s:var m=y(l-u,l-1);c=[v].concat(Object(E.a)(m),Object(E.a)(c));break;case!o&&s:var d=y(i+1,i+u);c=[].concat(Object(E.a)(c),Object(E.a)(d),[k]);break;case o&&s:default:c=[v].concat(Object(E.a)(c),[k])}return[1].concat(Object(E.a)(c),[e])}return y(1,e)};var r=e.totalRecords,c=void 0===r?null:r,o=e.pageLimit,s=void 0===o?30:o,u=e.pageNeighbours,m=void 0===u?0:u;return a.pageLimit="number"===typeof s?s:30,a.totalRecords="number"===typeof c?c:0,a.pageNeighbours="number"===typeof m?Math.max(0,Math.min(m,2)):0,a.totalPages=Math.ceil(a.totalRecords/a.pageLimit),a.state={currentPage:1},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.pageLimit!==this.props.pageLimit&&this.gotoPage(1)}},{key:"componentDidMount",value:function(){this.gotoPage(1)}},{key:"render",value:function(){var e=this;if(!this.props.totalRecords||1===Math.ceil(this.props.totalRecords/this.props.pageLimit))return null;var t=this.state.currentPage,a=this.fetchPageNumbers();return s.a.createElement(o.Fragment,null,s.a.createElement("nav",{"aria-label":"Countries Pagination"},s.a.createElement("ul",{className:"pagination pull-right"},a.map((function(a,n){return a===v?s.a.createElement("li",{key:n,className:"page-item"},s.a.createElement("a",{className:"page-link",href:"#","aria-label":"Previous",onClick:e.handleMoveLeft},s.a.createElement("span",{"aria-hidden":"true"},"\xab"),s.a.createElement("span",{className:"sr-only"},"Previous"))):a===k?s.a.createElement("li",{key:n,className:"page-item"},s.a.createElement("a",{className:"page-link",href:"#","aria-label":"Next",onClick:e.handleMoveRight},s.a.createElement("span",{"aria-hidden":"true"},"\xbb"),s.a.createElement("span",{className:"sr-only"},"Next"))):s.a.createElement("li",{key:n,className:"page-item".concat(t===a?" active":"")},s.a.createElement("a",{className:"page-link",href:"#",onClick:e.handleClick(a)},a))})))))}}]),t}(o.Component);a.d(t,"a",(function(){return M}));var M=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(i.a)(t).call(this,e))).onPageChanged=function(e){var t=e.currentPage;a.setState({page:t},(function(){a.FilterResult()}))},a.handleSearch=function(e){a.setState({search:e.target.value,page:1},(function(){a.FilterResult()}))},a.handleRow=function(e){a.setState({row:e.target.value,page:1},(function(){a.FilterResult()}))},a.state={sort:null,sortStatus:0,page:1,search:"",row:5},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"Sorting",value:function(e){var t,a=this;e===this.state.sort?(0===this.state.sortStatus?t=1:1===this.state.sortStatus?t=2:(t=0,e=null),this.setState({sort:e,sortStatus:t},(function(){a.FilterResult()}))):this.setState({sort:e,sortStatus:1},(function(){a.FilterResult()}))}},{key:"encodeQueryData",value:function(e){var t=[];for(var a in e)e[a]&&t.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return t.join("&")}},{key:"FilterResult",value:function(){var e={page:this.state.page,row:this.state.row,search:this.state.search,by:this.state.sort,sort:this.state.sortStatus};this.props.handleRespone({query:this.encodeQueryData(e)})}},{key:"HeaderField",value:function(e){for(var t=this,a=["fa fa-sort fa-sm mt-2","fa fa-sort-asc fa-sm mt-2","fa fa-sort-desc fa-sm mt-2"],n=["#bfbfbf","black","black"],r=[],l=function(l){c=e[l].width?e[l].width:null,null!==e[l].field&&!1!==e[l].sort?r.push(s.a.createElement("th",{width:c,style:{cursor:"pointer"},onClick:function(){return t.Sorting(e[l].field)},key:l},e[l].title,"  ",s.a.createElement("i",{style:{color:t.state.sort===e[l].field?n[t.state.sortStatus]:n[0]},className:t.state.sort===e[l].field?a[t.state.sortStatus]:a[0]}))):r.push(s.a.createElement("th",{width:c,key:l},e[l].title))},i=0;i<e.length;i++){var c;l(i)}return s.a.createElement("thead",null,s.a.createElement("tr",null,r))}},{key:"ListValue",value:function(e,t){var a;if(null!=e){var n=e.from;a=e.data.map((function(e,a){for(var r=[],l=0;l<t.length;l++)t[l].template?r.push(s.a.createElement("td",{key:l},t[l].template(e,a,n++))):r.push(s.a.createElement("td",{key:l},e[t[l].field]));return s.a.createElement("tr",{key:a},r)}))}return a}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(u.a,null,s.a.createElement(m.a,{xs:"12",sm:"6",md:"6"},s.a.createElement(d.a,{row:!0},s.a.createElement(m.a,{xs:"12",sm:"6",md:"4"},s.a.createElement(p.a,{onChange:this.handleRow,type:"select",name:"rows",id:"rows"},s.a.createElement("option",{value:"5"},"5 Rows"),s.a.createElement("option",{value:"10"},"10 Rows"),s.a.createElement("option",{value:"15"},"15 Rows"),s.a.createElement("option",{value:"20"},"20 Rows"),s.a.createElement("option",{value:"25"},"25 Rows"),s.a.createElement("option",{value:"30"},"30 Rows"))))),s.a.createElement(m.a,{xs:"12",sm:"6",md:"6"},s.a.createElement(d.a,{row:!0},s.a.createElement(m.a,{md:"12"},s.a.createElement(f.a,{className:"pull-bottom"},s.a.createElement(g.a,{addonType:"prepend"},s.a.createElement(h.a,{type:"button",color:"primary"},s.a.createElement("i",{className:"fa fa-search"})," Search")),s.a.createElement(p.a,{onChange:this.handleSearch,type:"text",id:"input1-group2",name:"input1-group2",placeholder:"Type Here....."})))))),s.a.createElement(b.a,{hover:!0,bordered:!0,striped:!0,responsive:!0},this.HeaderField(this.props.columns),s.a.createElement("tbody",null,this.props.loading?s.a.createElement("tr",null,s.a.createElement("td",{colSpan:this.props.columns.length,align:"center"},"Loading...")):this.ListValue(this.props.data,this.props.columns))),null!=this.props.data?s.a.createElement(u.a,null,s.a.createElement(m.a,{xs:"12",sm:"6",md:"6"},s.a.createElement("dt",null,"Showing ",this.props.data.from," to ",this.props.data.to," of ",this.props.data.total," entries")),s.a.createElement(m.a,{xs:"12",sm:"6",md:"6"},s.a.createElement(O,{totalRecords:this.props.data.total,pageLimit:parseInt(this.props.data.per_page),pageNeighbours:1,onPageChanged:this.onPageChanged}))):null)}}]),t}(o.Component)},545:function(e,t,a){"use strict";function n(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function r(e){this.setState(function(t){var a=this.constructor.getDerivedStateFromProps(e,t);return null!==a&&void 0!==a?a:null}.bind(this))}function l(e,t){try{var a=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(a,n)}finally{this.props=a,this.state=n}}function i(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!==typeof e.getDerivedStateFromProps&&"function"!==typeof t.getSnapshotBeforeUpdate)return e;var a=null,i=null,c=null;if("function"===typeof t.componentWillMount?a="componentWillMount":"function"===typeof t.UNSAFE_componentWillMount&&(a="UNSAFE_componentWillMount"),"function"===typeof t.componentWillReceiveProps?i="componentWillReceiveProps":"function"===typeof t.UNSAFE_componentWillReceiveProps&&(i="UNSAFE_componentWillReceiveProps"),"function"===typeof t.componentWillUpdate?c="componentWillUpdate":"function"===typeof t.UNSAFE_componentWillUpdate&&(c="UNSAFE_componentWillUpdate"),null!==a||null!==i||null!==c){var o=e.displayName||e.name,s="function"===typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+o+" uses "+s+" but also contains the following legacy lifecycles:"+(null!==a?"\n  "+a:"")+(null!==i?"\n  "+i:"")+(null!==c?"\n  "+c:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"===typeof e.getDerivedStateFromProps&&(t.componentWillMount=n,t.componentWillReceiveProps=r),"function"===typeof t.getSnapshotBeforeUpdate){if("function"!==typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=l;var u=t.componentDidUpdate;t.componentDidUpdate=function(e,t,a){var n=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:a;u.call(this,e,t,n)}}return e}a.r(t),a.d(t,"polyfill",(function(){return i})),n.__suppressDeprecationWarning=!0,r.__suppressDeprecationWarning=!0,l.__suppressDeprecationWarning=!0},546:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(2),r=a.n(n).a.createContext({})},673:function(e,t,a){"use strict";var n=a(18),r=a(37),l=a(2),i=a.n(l),c=a(545),o=a(60),s=a.n(o),u=a(502),m=a.n(u),d=a(546),p=a(503),f={tag:p.q,activeTab:s.a.any,className:s.a.string,cssModule:s.a.object},g=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={activeTab:a.props.activeTab},a}return Object(r.a)(t,e),t.getDerivedStateFromProps=function(e,t){return t.activeTab!==e.activeTab?{activeTab:e.activeTab}:null},t.prototype.render=function(){var e=this.props,t=e.className,a=e.cssModule,r=e.tag,l=Object(p.n)(this.props,Object.keys(f)),c=Object(p.m)(m()("tab-content",t),a);return i.a.createElement(d.a.Provider,{value:{activeTabId:this.state.activeTab}},i.a.createElement(r,Object(n.a)({},l,{className:c})))},t}(l.Component);Object(c.polyfill)(g),t.a=g,g.propTypes=f,g.defaultProps={tag:"div"}},674:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a(18),r=a(48),l=a(2),i=a.n(l),c=a(60),o=a.n(c),s=a(502),u=a.n(s),m=a(546),d=a(503),p={tag:d.q,className:o.a.string,cssModule:o.a.object,tabId:o.a.any};function f(e){var t=e.className,a=e.cssModule,l=e.tabId,c=e.tag,o=Object(r.a)(e,["className","cssModule","tabId","tag"]),s=function(e){return Object(d.m)(u()("tab-pane",t,{active:l===e}),a)};return i.a.createElement(m.a.Consumer,null,(function(e){var t=e.activeTabId;return i.a.createElement(c,Object(n.a)({},o,{className:s(t)}))}))}f.propTypes=p,f.defaultProps={tag:"div"}},954:function(e,t,a){"use strict";a.r(t);var n=a(157),r=a(152),l=a(153),i=a(156),c=a(154),o=a(155),s=a(512),u=a(2),m=a.n(u),d=a(508),p=a(509),f=a(514),g=a(516),h=a(521),b=a(515),E=a(664),v=a(838),k=a(863),y=a(571),O=a(839),M=a(572),j=a(674),C=a(900),S=a(901),_=a(898),x=a(899),N=a(673),w=(a(502),a(573),a(530)),D=a.n(w),T=a(507),B=a.n(T),P=a(517),R=a(518),F=a(540),L=a(513),U=a(539),Y=a(527),K=a.n(Y),A=a(519),H=(a(528),a(523)),I=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).toggle=a.toggle.bind(Object(n.a)(a)),a.state={activeTab:"1"},a}return Object(o.a)(t,e),Object(l.a)(t,[{key:"valueDetail",value:function(e,t){return m.a.createElement("tr",null,m.a.createElement("td",{width:200},e),m.a.createElement("td",{width:5},":"),m.a.createElement("td",null,t))}},{key:"toggle",value:function(e){this.state.activeTab!==e&&this.setState({activeTab:e})}},{key:"render",value:function(){var e=this,t=[{name:"Draft",class:"badge badge-warning"},{name:"Selesai",class:"badge badge-success"},{name:"Selesai",class:"badge badge-success"}];if(this.props.data){var a=[],n=[];return this.props.data.foto.length<1&&a.push(m.a.createElement("tr",{key:0},m.a.createElement("td",null,"Belum Ada"))),this.props.data.foto.forEach((function(e,t){n.push(m.a.createElement("td",{style:{verticalAlign:"middle"},align:"center",key:t},m.a.createElement("img",{className:1==e.is_use?"img-success":"img-list",src:Object(L.b)(e.file)}))),n.length>=2&&(a.push(m.a.createElement("tr",{key:t},n)),n=[])})),n.length>0&&a.push(m.a.createElement("tr",{key:0},n)),m.a.createElement("div",{className:"animated fadeIn"},m.a.createElement(d.a,null,m.a.createElement(p.a,{md:"7"},m.a.createElement(f.a,null,m.a.createElement(g.a,null,m.a.createElement("strong",null,"Detail")),m.a.createElement(b.a,null,m.a.createElement(M.a,{hover:!0,bordered:!0,striped:!0,responsive:!0},m.a.createElement("tbody",null,this.valueDetail("Cabang",this.props.data.maintenance.nama_cabang),this.valueDetail("Lokasi",this.props.data.maintenance.nama_lokasi),this.valueDetail("CCTV",this.props.data.maintenance.kode_cctv+" ("+this.props.data.maintenance.nama_cctv+")"),this.valueDetail("Waktu",H(this.props.data.maintenance.waktu).format("dddd, DD MMMM YYYY - HH:mm")),this.valueDetail("Status",0==this.props.data.maintenance.code_mt?m.a.createElement("span",{className:"badge badge-warning"},"Draft"):m.a.createElement("span",{className:"badge badge-success"},"Selesai")),this.valueDetail("Kegiatan",this.props.data.maintenance.kegiatan),this.valueDetail("Created At",H(this.props.data.maintenance.created_at).format("dddd, DD MMMM YYYY - HH:mm")),this.valueDetail("Created By",this.props.data.maintenance.nama_created),this.valueDetail("Finish At",this.props.data.maintenance.finish_at?H(this.props.data.maintenance.finish_at).format("dddd, DD MMMM YYYY - HH:mm"):null),this.valueDetail("Finish By",this.props.data.maintenance.nama_finish)))))),m.a.createElement(p.a,{md:"5"},m.a.createElement(f.a,null,m.a.createElement(g.a,null,m.a.createElement("strong",null,"History"),m.a.createElement("div",{className:"card-header-actions"},m.a.createElement(h.a,{onClick:function(){return e.props.goBack(!0)},size:"sm",color:"warning"},m.a.createElement("i",{className:"cui-chevron-left"})," ",m.a.createElement("span",null,"Back")))),m.a.createElement(b.a,{style:{height:"300px",maxHeight:"300",overflowY:"scroll"}},this.props.data.history.map((function(e,a){return m.a.createElement(m.a.Fragment,{key:a},m.a.createElement("div",{className:"message"},m.a.createElement("div",{className:"py-3 pb-5 mr-3 float-left",style:{paddingTop:"0rem !important"}},m.a.createElement("div",{className:"avatar"},m.a.createElement("img",{src:Object(L.b)(e.foto),className:"img-avatar"}))),m.a.createElement("div",null,m.a.createElement("small",{className:"text-muted"},H(e.created_at).format("dddd, DD MMMM YYYY - HH:mm")),m.a.createElement("small",{className:"text-muted float-right mt-1"},m.a.createElement("span",{className:t[e.status_update].class},t[e.status_update].name))),m.a.createElement("div",{className:"text-truncate font-weight-bold"},e.nama),m.a.createElement("small",{className:"text-muted"},e.keterangan)),m.a.createElement("hr",null))})))))),m.a.createElement(d.a,null,m.a.createElement(p.a,{md:"7"},m.a.createElement(f.a,null,m.a.createElement(g.a,null,m.a.createElement("strong",null,"Foto")),m.a.createElement(b.a,null,m.a.createElement("h5",null,"Foto View"),m.a.createElement(M.a,{hover:!0,bordered:!0,striped:!0,responsive:!0},m.a.createElement("tbody",null,m.a.createElement("tr",null,m.a.createElement("td",null,m.a.createElement("b",null,"Before")),m.a.createElement("td",null,m.a.createElement("b",null,"After"))),m.a.createElement("tr",null,m.a.createElement("td",{style:{verticalAlign:"middle"},align:"center"},this.props.data.maintenance.foto_before?m.a.createElement("img",{className:"img-list",src:Object(L.b)(this.props.data.maintenance.foto_before)}):"Belum Ada"),m.a.createElement("td",{style:{verticalAlign:"middle"},align:"center"},this.props.data.maintenance.foto_after?m.a.createElement("img",{className:"img-list",src:Object(L.b)(this.props.data.maintenance.foto_after)}):"Belum Ada")))),m.a.createElement("h5",null,"Foto Kegiatan"),m.a.createElement(M.a,{hover:!0,bordered:!0,striped:!0,responsive:!0},m.a.createElement("tbody",null,a)))))))}return m.a.createElement("div",null,"Loading...")}}]),t}(u.Component);a.d(t,"default",(function(){return J}));var W=a(523);function q(e){var t=Object(F.a)(),a=t.register,n=t.handleSubmit,r=t.errors,l=(t.reset,[{value:"",name:"Loading..."}]),i=Object(u.useState)(!1),c=Object(s.a)(i,2),o=c[0],j=c[1],C=Object(u.useState)(!1),S=Object(s.a)(C,2),_=S[0],x=S[1],N=Object(u.useState)(l),w=Object(s.a)(N,2),T=w[0],Y=w[1],A=Object(u.useState)(l),H=Object(s.a)(A,2),I=H[0],W=H[1],q=Object(u.useState)([]),z=Object(s.a)(q,2),V=z[0],G=z[1],J=Object(u.useState)(null),Q=Object(s.a)(J,2),X=(Q[0],Q[1]),Z=Object(u.useState)("select"),$=Object(s.a)(Z,2),ee=$[0],te=$[1],ae=Object(u.useState)(null),ne=Object(s.a)(ae,2),re=ne[0],le=ne[1],ie=Object(u.useState)(null),ce=Object(s.a)(ie,2),oe=ce[0],se=ce[1],ue=function(e){if(e.target.files[0])if("image"!==e.target.files[0].type.split("/")[0])B.a.fire({title:"Error!",text:"Hanya File Gambar",icon:"error",confirmButtonText:"OK"}),X(null);else{var t=!1;e.target.files[0]&&(t=!0),t&&K.a.imageFileResizer(e.target.files[0],600,600,"PNG",100,0,(function(e){!function(e){X(e);var t={id:Object(R.c)(6),use:!1,file:e};V.push(t),G(V),X(null)}(e)}),"base64"),e.target.value=null}else X(null)},me=function(t,a){j(!0);var n=new FormData;for(var r in t)n.append(r,t[r]);n.append("foto",JSON.stringify(V)),n.append("status",a),D.a.post(Object(L.a)().postMaintenance,n,Object(L.c)(localStorage.getItem("token"),"multipart/form-data")).then((function(t){var a=t.data;Object(R.b)(a)?(B.a.fire({title:"Sukses!",text:a.api_message,icon:"success",confirmButtonText:"OK"}),j(!1),e.onClick(),e.refreshData(!0)):j(!1)})).catch((function(e){B.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"}),j(!1)}))};function de(e){x(!0),Y(l),D.a.get(Object(L.a)().getOptionLokasi+"?id_cabang="+e,Object(L.c)(localStorage.getItem("token"))).then((function(e){var t=e.data;Object(R.b)(t)&&(Y(t.data),pe(t.data[0].value))})).catch((function(e){B.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"})}))}function pe(e){W(l),D.a.get(Object(L.a)().getOptionCctv+"?id_lokasi="+e,Object(L.c)(localStorage.getItem("token"))).then((function(e){var t=e.data;Object(R.b)(t)&&W(t.data)})).catch((function(e){B.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"})}))}Object(u.useEffect)((function(){_||de(e.optionCabang[0].value)}),[T]);var fe=function(e){te(e)};return m.a.createElement(d.a,null,m.a.createElement(p.a,{xs:"12",sm:"12",md:"12"},m.a.createElement(f.a,null,m.a.createElement(g.a,null,m.a.createElement("strong",null,"Tambah Data"),m.a.createElement("div",{className:"card-header-actions"},m.a.createElement(h.a,{onClick:function(){return e.onClick()},block:!0,outline:!0,color:"primary"},m.a.createElement("i",{className:"fa fa-remove"})," ",m.a.createElement("span",null,"Hide")))),m.a.createElement(b.a,null,m.a.createElement(E.a,{onSubmit:n((function(e){B.a.fire({title:"Apakah anda yakin ? ",icon:"info",text:"Menyelesaikan data ini ?",showCancelButton:!0,focusConfirm:!1,confirmButtonText:"Ya",cancelButtonText:"Cancel"}).then((function(t){t.value&&me(e,1)}))}))},m.a.createElement(d.a,null,m.a.createElement(p.a,{md:"6"},m.a.createElement(P.d,{refs:a({required:!0}),name:"id_cabang",label:"Cabang",errors:r,data:e.optionCabang,onChange:function(e){return de(e.target.value)}}),m.a.createElement(P.d,{refs:a({required:!0}),name:"id_lokasi",label:"Lokasi",errors:r,data:T,onChange:function(e){return pe(e.target.value)}}),m.a.createElement(P.d,{refs:a({required:!0}),name:"id_cctv",label:"CCTV",errors:r,data:I})),m.a.createElement(p.a,{md:"6"},m.a.createElement(P.a,{refs:a({required:!0}),name:"waktu",label:"Waktu",errors:r}),m.a.createElement(v.a,{row:!0},m.a.createElement(p.a,{md:"3"},m.a.createElement(k.a,null,"Kegiatan")),m.a.createElement(p.a,{md:"9"},m.a.createElement(v.a,{check:!0,inline:!0},m.a.createElement(y.a,{innerRef:a(),className:"form-check-input",onChange:function(e){return fe(e.target.value)},type:"radio",name:"view_kegiatan",value:"select",checked:"select"===ee}),m.a.createElement(k.a,{className:"form-check-label",check:!0},"select")),m.a.createElement(v.a,{check:!0,inline:!0},m.a.createElement(y.a,{innerRef:a(),className:"form-check-input",onChange:function(e){return fe(e.target.value)},type:"radio",name:"view_kegiatan",value:"text",checked:"text"===ee}),m.a.createElement(k.a,{className:"form-check-label",check:!0},"text"))),m.a.createElement(p.a,{md:"12"},m.a.createElement("div",{style:{display:"select"===ee?"block":"none"}},m.a.createElement(y.a,{name:"kegiatan_select",innerRef:a(),invalid:r.kegiatan_select&&!0,type:"select"},e.optionKegiatan.map((function(e,t){return m.a.createElement("option",{key:t,value:e.value},e.name)}))),m.a.createElement(O.a,null,r.kegiatan_select&&r.kegiatan_select.message)),m.a.createElement("div",{style:{display:"text"===ee?"block":"none"}},m.a.createElement(y.a,{name:"kegiatan_text",innerRef:a(),invalid:r.kegiatan_text&&!0,type:"text"}),m.a.createElement(O.a,null,r.kegiatan_text&&r.kegiatan_text.message)))))),m.a.createElement("hr",null),m.a.createElement(d.a,null,m.a.createElement(p.a,{md:"12"},m.a.createElement(k.a,null,"Foto View CCTV")),m.a.createElement(p.a,{md:"6"},m.a.createElement(P.b,{refs:a(),name:"foto_before",label:"Foto Before",onChange:function(e,t){return le(t)},type:"file",errors:r})),m.a.createElement(p.a,{md:"6"},m.a.createElement(P.b,{refs:a(),name:"foto_after",label:"Foto After",type:"file",onChange:function(e,t){return se(t)},errors:r}))),m.a.createElement("hr",null),m.a.createElement(d.a,null,m.a.createElement(p.a,{md:"12"},m.a.createElement(v.a,null,m.a.createElement(k.a,null,"Foto Kegiatan"),m.a.createElement(d.a,null,m.a.createElement(p.a,{md:"3"},m.a.createElement(y.a,{name:"foto",type:"file",accept:"image/*",onChange:function(e){return ue(e)}})))),m.a.createElement(M.a,{responsive:!0,bordered:!0},m.a.createElement("thead",null,m.a.createElement("tr",null,m.a.createElement("th",{width:"80px"},"Hapus"),m.a.createElement("th",{width:"80px"},"Use"),m.a.createElement("th",null,"Foto"))),m.a.createElement("tbody",null,V.length>0?V.slice(0).reverse().map((function(e,t){return m.a.createElement("tr",{key:t},m.a.createElement("td",{style:{verticalAlign:"middle"},align:"center"},m.a.createElement(h.a,{title:"Hapus",onClick:function(){return function(e){var t=[];X(e);for(var a=0;a<V.length;a++)V[a].id!==e&&t.push(V[a]);G(t),X(null)}(e.id)},className:"btn-danger btn-brand icon btn-sm"},m.a.createElement("i",{className:"cui-trash"}))),m.a.createElement("td",{style:{verticalAlign:"middle"},align:"center"},m.a.createElement(v.a,{check:!0,className:"checkbox"},m.a.createElement(y.a,{checked:e.use,onChange:function(){return function(e){var t=[],a=null,n=0;X(e);for(var r=0;r<V.length;r++)V[r].id===e?(a={id:e,use:!V[r].use,file:V[r].file},V[r].use||(n+=1),t.push(a)):(V[r].use&&(n+=1),t.push(V[r]));var l=[];if(n>2){for(var i=!0,c=0;c<t.length;c++)!0===t[c].use&&t[c].id!==e&&i?(a={id:t[c].id,use:!1,file:t[c].file},i=!1,l.push(a)):l.push(t[c]);G(l)}else G(t);X(null)}(e.id)},className:"form-check-input",type:"checkbox",name:"foto_kegiatan"}),m.a.createElement(k.a,{check:!0,className:"form-check-label"}," "))),m.a.createElement("td",null,m.a.createElement("img",{height:"250px",src:e.file})))})):m.a.createElement("tr",null,m.a.createElement("td",{align:"center",colSpan:"3"},"---- Kosong ----")))))),o?m.a.createElement(h.a,{type:"button",size:"sm",color:"primary",disabled:!0}," ",m.a.createElement(U.MetroSpinner,{size:16,color:"#fff"})," "):m.a.createElement(m.a.Fragment,null,m.a.createElement(h.a,{type:"button",onClick:n((function(e){B.a.fire({title:"Apakah anda yakin ? ",icon:"info",text:"Menyimpan ke Draft ?",showCancelButton:!0,focusConfirm:!1,confirmButtonText:"Ya",cancelButtonText:"Cancel"}).then((function(t){t.value&&me(e,0)}))})),size:"sm",color:"primary",disabled:o}," ",m.a.createElement("span",null,m.a.createElement("i",{className:"fa fa-dot-circle-o"})," Draft")," "),"    ",m.a.createElement(h.a,{type:"submit",size:"sm",color:"primary",disabled:function(){for(var e=0,t=0;t<V.length;t++)!0===V[t].use&&(e+=1);return 2!==e||(null===re||null===oe)}()||o},m.a.createElement("span",null,m.a.createElement("i",{className:"fa fa-dot-circle-o"})," Simpan")," ")))))))}function z(e){var t=Object(F.a)({defaultValues:{id_cabang:e.data.id_cabang,waktu:e.data.waktu,kegiatan_select:e.data.kegiatan}}),a=t.register,n=t.handleSubmit,r=t.errors,l=t.setValue,i=[{value:"",name:"Loading..."}],c=Object(u.useState)(!1),o=Object(s.a)(c,2),j=o[0],C=o[1],S=Object(u.useState)(!1),_=Object(s.a)(S,2),x=_[0],N=_[1],w=Object(u.useState)(i),T=Object(s.a)(w,2),Y=T[0],A=T[1],H=Object(u.useState)(i),I=Object(s.a)(H,2),W=I[0],q=I[1],z=Object(u.useState)(e.foto),V=Object(s.a)(z,2),G=V[0],J=V[1],Q=Object(u.useState)(null),X=Object(s.a)(Q,2),Z=(X[0],X[1]),$=Object(u.useState)("select"),ee=Object(s.a)($,2),te=ee[0],ae=ee[1],ne=Object(u.useState)(e.data.foto_before),re=Object(s.a)(ne,2),le=re[0],ie=re[1],ce=Object(u.useState)(e.data.foto_after),oe=Object(s.a)(ce,2),se=oe[0],ue=oe[1],me=function(e){if(e.target.files[0])if("image"!==e.target.files[0].type.split("/")[0])B.a.fire({title:"Error!",text:"Hanya File Gambar",icon:"error",confirmButtonText:"OK"}),Z(null);else{var t=!1;e.target.files[0]&&(t=!0),t&&K.a.imageFileResizer(e.target.files[0],600,600,"PNG",100,0,(function(e){!function(e){Z(e);var t={id:Object(R.c)(6),use:!1,file:e};G.push(t),J(G),Z(null)}(e)}),"base64"),e.target.value=null}else Z(null)},de=function(t,a){C(!0);var n=new FormData;for(var r in t)n.append(r,t[r]);n.append("foto",JSON.stringify(G)),n.append("status",a),D.a.post(Object(L.a)().updateMaintenance,n,Object(L.c)(localStorage.getItem("token"),"multipart/form-data")).then((function(t){var a=t.data;Object(R.b)(a)?(B.a.fire({title:"Sukses!",text:a.api_message,icon:"success",confirmButtonText:"OK"}),C(!1),e.onClick(),e.refreshData(!0)):C(!1)})).catch((function(e){B.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"}),C(!1)}))};function pe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;N(!0),A(i),D.a.get(Object(L.a)().getOptionLokasi+"?id_cabang="+e,Object(L.c)(localStorage.getItem("token"))).then((function(e){var n=e.data;Object(R.b)(n)&&(A(n.data),t?(l("id_lokasi",t),fe(t,a)):fe(n.data[0].value))})).catch((function(e){B.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"})}))}function fe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;q(i),D.a.get(Object(L.a)().getOptionCctv+"?id_lokasi="+e,Object(L.c)(localStorage.getItem("token"))).then((function(e){var a=e.data;Object(R.b)(a)&&(q(a.data),t&&l("id_cctv",t))})).catch((function(e){B.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"})}))}Object(u.useEffect)((function(){x||pe(e.data.id_cabang,e.data.id_lokasi,e.data.id_cctv)}),[Y]);var ge=function(e){ae(e)};return m.a.createElement(d.a,null,m.a.createElement(p.a,{xs:"12",sm:"12",md:"12"},m.a.createElement(f.a,null,m.a.createElement(g.a,null,m.a.createElement("strong",null,"Ubah Data"),m.a.createElement("div",{className:"card-header-actions"},m.a.createElement(h.a,{onClick:function(){return e.onClick()},block:!0,outline:!0,color:"primary"},m.a.createElement("i",{className:"fa fa-remove"})," ",m.a.createElement("span",null,"Hide")))),m.a.createElement(b.a,null,m.a.createElement(E.a,{onSubmit:n((function(e){B.a.fire({title:"Apakah anda yakin ? ",icon:"info",text:"Menyelesaikan data ini ?",showCancelButton:!0,focusConfirm:!1,confirmButtonText:"Ya",cancelButtonText:"Cancel"}).then((function(t){t.value&&de(e,1)}))}))},m.a.createElement("input",{ref:a(),type:"hidden",name:"id",value:e.data.id_mt}),m.a.createElement(d.a,null,m.a.createElement(p.a,{md:"6"},m.a.createElement(P.d,{refs:a({required:!0}),name:"id_cabang",label:"Cabang",errors:r,data:e.optionCabang,onChange:function(e){return pe(e.target.value)}}),m.a.createElement(P.d,{refs:a({required:!0}),name:"id_lokasi",label:"Lokasi",errors:r,data:Y,onChange:function(e){return fe(e.target.value)}}),m.a.createElement(P.d,{refs:a({required:!0}),name:"id_cctv",label:"CCTV",errors:r,data:W})),m.a.createElement(p.a,{md:"6"},m.a.createElement(P.a,{refs:a({required:!0}),name:"waktu",label:"Waktu",errors:r,value:e.data.waktu}),m.a.createElement(v.a,{row:!0},m.a.createElement(p.a,{md:"3"},m.a.createElement(k.a,null,"Kegiatan")),m.a.createElement(p.a,{md:"9"},m.a.createElement(v.a,{check:!0,inline:!0},m.a.createElement(y.a,{innerRef:a(),className:"form-check-input",onChange:function(e){return ge(e.target.value)},type:"radio",name:"view_kegiatan",value:"select",checked:"select"===te}),m.a.createElement(k.a,{className:"form-check-label",check:!0},"select")),m.a.createElement(v.a,{check:!0,inline:!0},m.a.createElement(y.a,{innerRef:a(),className:"form-check-input",onChange:function(e){return ge(e.target.value)},type:"radio",name:"view_kegiatan",value:"text",checked:"text"===te}),m.a.createElement(k.a,{className:"form-check-label",check:!0},"text"))),m.a.createElement(p.a,{md:"12"},m.a.createElement("div",{style:{display:"select"===te?"block":"none"}},m.a.createElement(y.a,{name:"kegiatan_select",innerRef:a(),invalid:r.kegiatan_select&&!0,type:"select"},e.optionKegiatan.map((function(e,t){return m.a.createElement("option",{key:t,value:e.value},e.name)}))),m.a.createElement(O.a,null,r.kegiatan_select&&r.kegiatan_select.message)),m.a.createElement("div",{style:{display:"text"===te?"block":"none"}},m.a.createElement(y.a,{name:"kegiatan_text",innerRef:a(),invalid:r.kegiatan_text&&!0,type:"text"}),m.a.createElement(O.a,null,r.kegiatan_text&&r.kegiatan_text.message)))))),m.a.createElement("hr",null),m.a.createElement(d.a,null,m.a.createElement(p.a,{md:"12"},m.a.createElement(k.a,null,"Foto View CCTV")),m.a.createElement(p.a,{md:"6"},m.a.createElement(P.b,{refs:a(),name:"foto_before",label:"Foto Before",onChange:function(e,t){return ie(t)},type:"file",errors:r,value:le})),m.a.createElement(p.a,{md:"6"},m.a.createElement(P.b,{refs:a(),name:"foto_after",label:"Foto After",type:"file",onChange:function(e,t){return ue(t)},errors:r,value:se}))),m.a.createElement("hr",null),m.a.createElement(d.a,null,m.a.createElement(p.a,{md:"12"},m.a.createElement(v.a,null,m.a.createElement(k.a,null,"Foto Kegiatan"),m.a.createElement(d.a,null,m.a.createElement(p.a,{md:"3"},m.a.createElement(y.a,{name:"foto",type:"file",accept:"image/*",onChange:function(e){return me(e)}})))),m.a.createElement(M.a,{responsive:!0,bordered:!0},m.a.createElement("thead",null,m.a.createElement("tr",null,m.a.createElement("th",{width:"80px"},"Hapus"),m.a.createElement("th",{width:"80px"},"Use"),m.a.createElement("th",null,"Foto"))),m.a.createElement("tbody",null,G.length>0?G.slice(0).reverse().map((function(e,t){return m.a.createElement("tr",{key:t},m.a.createElement("td",{style:{verticalAlign:"middle"},align:"center"},m.a.createElement(h.a,{title:"Hapus",onClick:function(){return function(e){var t=[];Z(e);for(var a=0;a<G.length;a++)G[a].id!==e&&t.push(G[a]);J(t),Z(null)}(e.id)},className:"btn-danger btn-brand icon btn-sm"},m.a.createElement("i",{className:"cui-trash"}))),m.a.createElement("td",{style:{verticalAlign:"middle"},align:"center"},m.a.createElement(v.a,{check:!0,className:"checkbox"},m.a.createElement(y.a,{checked:e.use,onChange:function(){return function(e){var t=[],a=null,n=0;Z(e);for(var r=0;r<G.length;r++)G[r].id===e?(a={id:e,use:!G[r].use,file:G[r].file},G[r].use||(n+=1),t.push(a)):(G[r].use&&(n+=1),t.push(G[r]));var l=[];if(n>2){for(var i=!0,c=0;c<t.length;c++)!0===t[c].use&&t[c].id!==e&&i?(a={id:t[c].id,use:!1,file:t[c].file},i=!1,l.push(a)):l.push(t[c]);J(l)}else J(t);Z(null)}(e.id)},className:"form-check-input",type:"checkbox",name:"foto_kegiatan"}),m.a.createElement(k.a,{check:!0,className:"form-check-label"}," "))),m.a.createElement("td",null,m.a.createElement("img",{height:"250px",src:e.file})))})):m.a.createElement("tr",null,m.a.createElement("td",{align:"center",colSpan:"3"},"---- Kosong ----")))))),j?m.a.createElement(h.a,{type:"button",size:"sm",color:"primary",disabled:!0}," ",m.a.createElement(U.MetroSpinner,{size:16,color:"#fff"})," "):m.a.createElement(m.a.Fragment,null,m.a.createElement(h.a,{type:"button",onClick:n((function(e){B.a.fire({title:"Apakah anda yakin ? ",icon:"info",text:"Menyimpan ke Draft ?",showCancelButton:!0,focusConfirm:!1,confirmButtonText:"Ya",cancelButtonText:"Cancel"}).then((function(t){t.value&&de(e,0)}))})),size:"sm",color:"primary",disabled:j}," ",m.a.createElement("span",null,m.a.createElement("i",{className:"fa fa-dot-circle-o"})," Draft")," "),"    ",m.a.createElement(h.a,{type:"submit",size:"sm",color:"primary",disabled:function(){for(var e=0,t=0;t<G.length;t++)!0===G[t].use&&(e+=1);return 2!==e||(null===le||null===se)}()||j},m.a.createElement("span",null,m.a.createElement("i",{className:"fa fa-dot-circle-o"})," Simpan")," ")))))))}var V=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).columns=[{title:"",field:null,width:120,template:function(e){return m.a.createElement(m.a.Fragment,null,m.a.createElement(h.a,{onClick:function(){return a.doDelete(e.id_mt)},title:"Hapus",className:"btn-danger btn-brand icon btn-sm"},m.a.createElement("i",{className:"cui-trash"}))," ","   ",m.a.createElement(h.a,{onClick:function(){return a.props.doUpdate(e.id_mt)},title:"Ubah",className:"btn-stack-overflow btn-brand icon btn-sm"},m.a.createElement("i",{className:"cui-pencil"}))," ","   ",m.a.createElement(h.a,{onClick:function(){return a.props.doRead(e.id_mt)},title:"Detail",className:"btn-info btn-brand icon btn-sm"},m.a.createElement("i",{style:{color:"#fff"},className:"cui-magnifying-glass"})))}},{title:"Lokasi",field:"nama_lokasi",width:150},{title:"CCTV",field:"kode_cctv",template:function(e){return e.kode_cctv+" ("+e.nama_cctv+")"}},{title:"Waktu",field:"waktu",template:function(e){return W(e.waktu).format("dddd, DD MMMM YYYY - HH:mm")}},{title:"Created At",field:"created_at",template:function(e){return W(e.created_at).format("dddd, DD MMMM YYYY - HH:mm")}},{title:"User",field:"created_name",template:function(e){return e.created_name}}],a.handleRespone=function(e){var t=e.query;a.setState({query:t},(function(){a.getData()}))},a.state={data:null,loading:!0,query:"page=1&row=10"},a}return Object(o.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getData(),this.props.total(null)}},{key:"doDelete",value:function(e){var t=this;B.a.fire({title:"Apakah anda yakin ? ",icon:"info",text:"Menghapus data ini ?",showCancelButton:!0,focusConfirm:!1,confirmButtonText:"Ya",cancelButtonText:"Cancel"}).then((function(a){a.value&&(Object(R.a)(),D.a.post(Object(L.a)().deleteMaintenance,Object(L.d)({id:e}),Object(L.c)(localStorage.getItem("token"))).then((function(e){var a=e.data;Object(R.b)(a)&&(B.a.fire({title:"Sukses!",text:a.api_message,icon:"success",confirmButtonText:"OK"}),t.getData())})).catch((function(e){B.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"})})))}))}},{key:"getData",value:function(){var e=this;this.setState({loading:!0}),D.a.get(Object(L.a)().getMaintenance+"?status=0&"+this.state.query,Object(L.c)(localStorage.getItem("token"))).then((function(t){var a=t.data;Object(R.b)(a)?(e.setState({data:a.data,loading:!1}),e.props.total(a.data.total)):e.props.total(0)})).catch((function(e){B.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"})}))}},{key:"render",value:function(){return m.a.createElement(A.a,{data:this.state.data,columns:this.columns,loading:this.state.loading,handleRespone:this.handleRespone})}}]),t}(u.Component),G=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).columns=[{title:"",field:null,width:90,template:function(e){return m.a.createElement(m.a.Fragment,null,m.a.createElement(h.a,{onClick:function(){return a.props.doUpdate(e.id_mt)},title:"Ubah",className:"btn-stack-overflow btn-brand icon btn-sm"},m.a.createElement("i",{className:"cui-pencil"}))," ","   ",m.a.createElement(h.a,{onClick:function(){return a.props.doRead(e.id_mt)},title:"Detail",className:"btn-info btn-brand icon btn-sm"},m.a.createElement("i",{style:{color:"#fff"},className:"cui-magnifying-glass"})))}},{title:"Lokasi",field:"nama_lokasi",width:150},{title:"CCTV",field:"kode_cctv",template:function(e){return e.kode_cctv+" ("+e.nama_cctv+")"}},{title:"Waktu",field:"waktu",template:function(e){return W(e.waktu).format("dddd, DD MMMM YYYY - HH:mm")}},{title:"Finish At",field:"finish_at",template:function(e){return W(e.finish_at).format("dddd, DD MMMM YYYY - HH:mm")}},{title:"User",field:"finish_name",template:function(e){return e.finish_name}}],a.handleRespone=function(e){var t=e.query;a.setState({query:t},(function(){a.getData()}))},a.state={data:null,loading:!0,query:"page=1&row=10"},a}return Object(o.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=this;this.setState({loading:!0}),D.a.get(Object(L.a)().getMaintenance+"?status=1&"+this.state.query,Object(L.c)(localStorage.getItem("token"))).then((function(t){var a=t.data;Object(R.b)(a)&&e.setState({data:a.data,loading:!1})})).catch((function(e){B.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"})}))}},{key:"render",value:function(){return m.a.createElement(A.a,{data:this.state.data,columns:this.columns,loading:this.state.loading,handleRespone:this.handleRespone})}}]),t}(u.Component),J=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).toggle=a.toggle.bind(Object(n.a)(a)),a.state={pageAdd:!1,pageUpdate:!1,updateLoading:!1,dataUpdate:null,fotoUpdate:null,optionCabang:null,optionKegiatan:null,activeTab:new Array(4).fill("1"),total:null,listactive:!0,detailData:null,pageDetail:!1,pageLoading:!1},a}return Object(o.a)(t,e),Object(l.a)(t,[{key:"toggle",value:function(e,t){var a=this.state.activeTab.slice();a[e]=t,this.setState({activeTab:a})}},{key:"getData",value:function(){this.setState({listactive:!1}),this.setState({listactive:!0})}},{key:"tabPane",value:function(){var e=this;return this.state.listactive?m.a.createElement(m.a.Fragment,null,m.a.createElement(j.a,{tabId:"1"},m.a.createElement(V,{total:function(t){return e.setState({total:t})},doRead:function(t){return e.doRead(t)},doUpdate:function(t){return e.doUpdate(t)}})),m.a.createElement(j.a,{tabId:"2"},m.a.createElement(G,{doRead:function(t){return e.doRead(t)},doUpdate:function(t){return e.doUpdate(t)}}))):null}},{key:"componentDidMount",value:function(){this.getCabang(),this.getKegiatan()}},{key:"getCabang",value:function(){var e=this;D.a.get(Object(L.a)().getOptionCabang,Object(L.c)(localStorage.getItem("token"))).then((function(t){var a=t.data;Object(R.b)(a)&&e.setState({optionCabang:a.data})})).catch((function(e){B.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"})}))}},{key:"doRead",value:function(e){var t=this;this.setState({pageLoading:!0}),D.a.get(Object(L.a)().detailMaintenance+"?id="+e,Object(L.c)(localStorage.getItem("token"))).then((function(e){var a=e.data;Object(R.b)(a)&&t.setState({pageDetail:!0,detailData:a.data,pageLoading:!1})})).catch((function(e){B.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"})}))}},{key:"doUpdate",value:function(e){var t=this;window.scrollTo(0,0),this.setState({dataUpdate:null,pageUpdate:!1,updateLoading:!0,pageAdd:!1}),D.a.get(Object(L.a)().getMaintenanceBy+"?id="+e,Object(L.c)(localStorage.getItem("token"))).then((function(e){var a=e.data;Object(R.b)(a)&&t.setState({dataUpdate:a.data.maintenance,fotoUpdate:a.data.foto,pageUpdate:!0,updateLoading:!1})})).catch((function(e){B.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"})}))}},{key:"getKegiatan",value:function(){var e=this;D.a.get(Object(L.a)().getOptionKegiatan,Object(L.c)(localStorage.getItem("token"))).then((function(t){var a=t.data;Object(R.b)(a)&&e.setState({optionKegiatan:a.data})})).catch((function(e){B.a.fire({title:"Error!",text:e.toString(),icon:"error",confirmButtonText:"OK"})}))}},{key:"render",value:function(){var e=this,t=null,a=null;return null!==this.state.optionCabang&&null!==this.state.optionKegiatan&&this.state.pageAdd?t=m.a.createElement(q,{onClick:function(){return e.setState({pageAdd:!1})},refreshData:function(t){return e.getData()},optionKegiatan:this.state.optionKegiatan,optionCabang:this.state.optionCabang}):null!==this.state.optionCabang&&null!==this.state.optionKegiatan&&this.state.pageUpdate&&(t=m.a.createElement(z,{onClick:function(){return e.setState({pageUpdate:!1})},refreshData:function(t){return e.getData()},optionKegiatan:this.state.optionKegiatan,optionCabang:this.state.optionCabang,data:this.state.dataUpdate,foto:this.state.fotoUpdate})),null!==this.state.total&&(a=m.a.createElement(m.a.Fragment,null,"  ","  ","  ",m.a.createElement(C.a,{pill:!0,color:"danger"},this.state.total)," ")),this.state.pageLoading?m.a.createElement(U.MetroSpinner,{size:34,color:"#fff"}):this.state.pageDetail?m.a.createElement(I,{data:this.state.detailData,goBack:function(t){return e.setState({pageDetail:!1})}}):m.a.createElement(m.a.Fragment,null,this.state.updateLoading?m.a.createElement(U.MetroSpinner,{size:34,color:"#fff"}):t,m.a.createElement("div",{className:"animated fadeIn"},m.a.createElement(d.a,null,m.a.createElement(p.a,{xs:"12",sm:"12",md:"12"},m.a.createElement(f.a,null,m.a.createElement(g.a,null,m.a.createElement("strong",null,"Maintenance"),m.a.createElement("div",{className:"card-header-actions"},this.state.pageAdd?null:m.a.createElement(h.a,{onClick:function(){return e.setState({pageAdd:!0,pageUpdate:!1})},block:!0,outline:!0,color:"primary"},m.a.createElement("i",{className:"fa fa-plus-circle"})," ",m.a.createElement("span",null,"Tambah")))),m.a.createElement(b.a,null,m.a.createElement(p.a,{xs:"12",md:"12",className:"mb-4"},m.a.createElement(S.a,{tabs:!0},m.a.createElement(_.a,null,m.a.createElement(x.a,{active:"1"===this.state.activeTab[3],onClick:function(){e.toggle(3,"1")}},m.a.createElement("i",{className:"cui-bookmark"}),m.a.createElement("span",null," Draft List"),a)),m.a.createElement(_.a,null,m.a.createElement(x.a,{active:"2"===this.state.activeTab[3],onClick:function(){e.toggle(3,"2")}},m.a.createElement("i",{className:"cui-check"}),m.a.createElement("span",null," Complete List")))),m.a.createElement(N.a,{activeTab:this.state.activeTab[3]},this.tabPane()))))))))}}]),t}(u.Component)}}]);
//# sourceMappingURL=23.5d63d099.chunk.js.map